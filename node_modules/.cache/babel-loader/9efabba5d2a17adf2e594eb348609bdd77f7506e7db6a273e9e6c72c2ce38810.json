{"ast":null,"code":";\n(function () {\n  var UPNG = {};\n\n  // Make available for import by `require()`\n  var pako;\n  if (typeof module == \"object\") {\n    module.exports = UPNG;\n  } else {\n    window.UPNG = UPNG;\n  }\n  if (typeof require == \"function\") {\n    pako = require(\"pako\");\n  } else {\n    pako = window.pako;\n  }\n  function log() {\n    if (typeof process == \"undefined\" || process.env.NODE_ENV == \"development\") console.log.apply(console, arguments);\n  }\n  (function (UPNG, pako) {\n    UPNG.toRGBA8 = function (out) {\n      var w = out.width,\n        h = out.height;\n      if (out.tabs.acTL == null) return [UPNG.toRGBA8.decodeImage(out.data, w, h, out).buffer];\n      var frms = [];\n      if (out.frames[0].data == null) out.frames[0].data = out.data;\n      var img,\n        empty = new Uint8Array(w * h * 4);\n      for (var i = 0; i < out.frames.length; i++) {\n        var frm = out.frames[i];\n        var fx = frm.rect.x,\n          fy = frm.rect.y,\n          fw = frm.rect.width,\n          fh = frm.rect.height;\n        var fdata = UPNG.toRGBA8.decodeImage(frm.data, fw, fh, out);\n        if (i == 0) img = fdata;else if (frm.blend == 0) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 0);else if (frm.blend == 1) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 1);\n        frms.push(img.buffer);\n        img = img.slice(0);\n        if (frm.dispose == 0) {} else if (frm.dispose == 1) UPNG._copyTile(empty, fw, fh, img, w, h, fx, fy, 0);else if (frm.dispose == 2) {\n          var pi = i - 1;\n          while (out.frames[pi].dispose == 2) pi--;\n          img = new Uint8Array(frms[pi]).slice(0);\n        }\n      }\n      return frms;\n    };\n    UPNG.toRGBA8.decodeImage = function (data, w, h, out) {\n      var area = w * h,\n        bpp = UPNG.decode._getBPP(out);\n      var bpl = Math.ceil(w * bpp / 8); // bytes per line\n\n      var bf = new Uint8Array(area * 4),\n        bf32 = new Uint32Array(bf.buffer);\n      var ctype = out.ctype,\n        depth = out.depth;\n      var rs = UPNG._bin.readUshort;\n\n      //console.log(ctype, depth);\n\n      if (ctype == 6) {\n        // RGB + alpha\n        var qarea = area << 2;\n        if (depth == 8) for (var i = 0; i < qarea; i++) {\n          bf[i] = data[i]; /*if((i&3)==3 && data[i]!=0) bf[i]=255;*/\n        }\n        if (depth == 16) for (var i = 0; i < qarea; i++) {\n          bf[i] = data[i << 1];\n        }\n      } else if (ctype == 2) {\n        // RGB\n        var ts = out.tabs[\"tRNS\"],\n          tr = -1,\n          tg = -1,\n          tb = -1;\n        if (ts) {\n          tr = ts[0];\n          tg = ts[1];\n          tb = ts[2];\n        }\n        if (depth == 8) for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n            ti = i * 3;\n          bf[qi] = data[ti];\n          bf[qi + 1] = data[ti + 1];\n          bf[qi + 2] = data[ti + 2];\n          bf[qi + 3] = 255;\n          if (tr != -1 && data[ti] == tr && data[ti + 1] == tg && data[ti + 2] == tb) bf[qi + 3] = 0;\n        }\n        if (depth == 16) for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n            ti = i * 6;\n          bf[qi] = data[ti];\n          bf[qi + 1] = data[ti + 2];\n          bf[qi + 2] = data[ti + 4];\n          bf[qi + 3] = 255;\n          if (tr != -1 && rs(data, ti) == tr && rs(data, ti + 2) == tg && rs(data, ti + 4) == tb) bf[qi + 3] = 0;\n        }\n      } else if (ctype == 3) {\n        // palette\n        var p = out.tabs[\"PLTE\"],\n          ap = out.tabs[\"tRNS\"],\n          tl = ap ? ap.length : 0;\n        //console.log(p, ap);\n        if (depth == 1) for (var y = 0; y < h; y++) {\n          var s0 = y * bpl,\n            t0 = y * w;\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2,\n              j = data[s0 + (i >> 3)] >> 7 - ((i & 7) << 0) & 1,\n              cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n        if (depth == 2) for (var y = 0; y < h; y++) {\n          var s0 = y * bpl,\n            t0 = y * w;\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2,\n              j = data[s0 + (i >> 2)] >> 6 - ((i & 3) << 1) & 3,\n              cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n        if (depth == 4) for (var y = 0; y < h; y++) {\n          var s0 = y * bpl,\n            t0 = y * w;\n          for (var i = 0; i < w; i++) {\n            var qi = t0 + i << 2,\n              j = data[s0 + (i >> 1)] >> 4 - ((i & 1) << 2) & 15,\n              cj = 3 * j;\n            bf[qi] = p[cj];\n            bf[qi + 1] = p[cj + 1];\n            bf[qi + 2] = p[cj + 2];\n            bf[qi + 3] = j < tl ? ap[j] : 255;\n          }\n        }\n        if (depth == 8) for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n            j = data[i],\n            cj = 3 * j;\n          bf[qi] = p[cj];\n          bf[qi + 1] = p[cj + 1];\n          bf[qi + 2] = p[cj + 2];\n          bf[qi + 3] = j < tl ? ap[j] : 255;\n        }\n      } else if (ctype == 4) {\n        // gray + alpha\n        if (depth == 8) for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n            di = i << 1,\n            gr = data[di];\n          bf[qi] = gr;\n          bf[qi + 1] = gr;\n          bf[qi + 2] = gr;\n          bf[qi + 3] = data[di + 1];\n        }\n        if (depth == 16) for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n            di = i << 2,\n            gr = data[di];\n          bf[qi] = gr;\n          bf[qi + 1] = gr;\n          bf[qi + 2] = gr;\n          bf[qi + 3] = data[di + 2];\n        }\n      } else if (ctype == 0) {\n        // gray\n        var tr = out.tabs[\"tRNS\"] ? out.tabs[\"tRNS\"] : -1;\n        if (depth == 1) for (var i = 0; i < area; i++) {\n          var gr = 255 * (data[i >> 3] >> 7 - (i & 7) & 1),\n            al = gr == tr * 255 ? 0 : 255;\n          bf32[i] = al << 24 | gr << 16 | gr << 8 | gr;\n        }\n        if (depth == 2) for (var i = 0; i < area; i++) {\n          var gr = 85 * (data[i >> 2] >> 6 - ((i & 3) << 1) & 3),\n            al = gr == tr * 85 ? 0 : 255;\n          bf32[i] = al << 24 | gr << 16 | gr << 8 | gr;\n        }\n        if (depth == 4) for (var i = 0; i < area; i++) {\n          var gr = 17 * (data[i >> 1] >> 4 - ((i & 1) << 2) & 15),\n            al = gr == tr * 17 ? 0 : 255;\n          bf32[i] = al << 24 | gr << 16 | gr << 8 | gr;\n        }\n        if (depth == 8) for (var i = 0; i < area; i++) {\n          var gr = data[i],\n            al = gr == tr ? 0 : 255;\n          bf32[i] = al << 24 | gr << 16 | gr << 8 | gr;\n        }\n        if (depth == 16) for (var i = 0; i < area; i++) {\n          var gr = data[i << 1],\n            al = rs(data, i << 1) == tr ? 0 : 255;\n          bf32[i] = al << 24 | gr << 16 | gr << 8 | gr;\n        }\n      }\n      return bf;\n    };\n    UPNG.decode = function (buff) {\n      var data = new Uint8Array(buff),\n        offset = 8,\n        bin = UPNG._bin,\n        rUs = bin.readUshort,\n        rUi = bin.readUint;\n      var out = {\n        tabs: {},\n        frames: []\n      };\n      var dd = new Uint8Array(data.length),\n        doff = 0; // put all IDAT data into it\n      var fd,\n        foff = 0; // frames\n\n      var mgck = [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a];\n      for (var i = 0; i < 8; i++) if (data[i] != mgck[i]) throw \"The input is not a PNG file!\";\n      while (offset < data.length) {\n        var len = bin.readUint(data, offset);\n        offset += 4;\n        var type = bin.readASCII(data, offset, 4);\n        offset += 4;\n        //log(type,len);\n\n        if (type == \"IHDR\") {\n          UPNG.decode._IHDR(data, offset, out);\n        } else if (type == \"IDAT\") {\n          for (var i = 0; i < len; i++) dd[doff + i] = data[offset + i];\n          doff += len;\n        } else if (type == \"acTL\") {\n          out.tabs[type] = {\n            num_frames: rUi(data, offset),\n            num_plays: rUi(data, offset + 4)\n          };\n          fd = new Uint8Array(data.length);\n        } else if (type == \"fcTL\") {\n          if (foff != 0) {\n            var fr = out.frames[out.frames.length - 1];\n            fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n            foff = 0;\n          }\n          var rct = {\n            x: rUi(data, offset + 12),\n            y: rUi(data, offset + 16),\n            width: rUi(data, offset + 4),\n            height: rUi(data, offset + 8)\n          };\n          var del = rUs(data, offset + 22);\n          del = rUs(data, offset + 20) / (del == 0 ? 100 : del);\n          var frm = {\n            rect: rct,\n            delay: Math.round(del * 1000),\n            dispose: data[offset + 24],\n            blend: data[offset + 25]\n          };\n          //console.log(frm);\n          out.frames.push(frm);\n        } else if (type == \"fdAT\") {\n          for (var i = 0; i < len - 4; i++) fd[foff + i] = data[offset + i + 4];\n          foff += len - 4;\n        } else if (type == \"pHYs\") {\n          out.tabs[type] = [bin.readUint(data, offset), bin.readUint(data, offset + 4), data[offset + 8]];\n        } else if (type == \"cHRM\") {\n          out.tabs[type] = [];\n          for (var i = 0; i < 8; i++) out.tabs[type].push(bin.readUint(data, offset + i * 4));\n        } else if (type == \"tEXt\") {\n          if (out.tabs[type] == null) out.tabs[type] = {};\n          var nz = bin.nextZero(data, offset);\n          var keyw = bin.readASCII(data, offset, nz - offset);\n          var text = bin.readASCII(data, nz + 1, offset + len - nz - 1);\n          out.tabs[type][keyw] = text;\n        } else if (type == \"iTXt\") {\n          if (out.tabs[type] == null) out.tabs[type] = {};\n          var nz = 0,\n            off = offset;\n          nz = bin.nextZero(data, off);\n          var keyw = bin.readASCII(data, off, nz - off);\n          off = nz + 1;\n          var cflag = data[off],\n            cmeth = data[off + 1];\n          off += 2;\n          nz = bin.nextZero(data, off);\n          var ltag = bin.readASCII(data, off, nz - off);\n          off = nz + 1;\n          nz = bin.nextZero(data, off);\n          var tkeyw = bin.readUTF8(data, off, nz - off);\n          off = nz + 1;\n          var text = bin.readUTF8(data, off, len - (off - offset));\n          out.tabs[type][keyw] = text;\n        } else if (type == \"PLTE\") {\n          out.tabs[type] = bin.readBytes(data, offset, len);\n        } else if (type == \"hIST\") {\n          var pl = out.tabs[\"PLTE\"].length / 3;\n          out.tabs[type] = [];\n          for (var i = 0; i < pl; i++) out.tabs[type].push(rUs(data, offset + i * 2));\n        } else if (type == \"tRNS\") {\n          if (out.ctype == 3) out.tabs[type] = bin.readBytes(data, offset, len);else if (out.ctype == 0) out.tabs[type] = rUs(data, offset);else if (out.ctype == 2) out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];\n          //else console.log(\"tRNS for unsupported color type\",out.ctype, len);\n        } else if (type == \"gAMA\") out.tabs[type] = bin.readUint(data, offset) / 100000;else if (type == \"sRGB\") out.tabs[type] = data[offset];else if (type == \"bKGD\") {\n          if (out.ctype == 0 || out.ctype == 4) out.tabs[type] = [rUs(data, offset)];else if (out.ctype == 2 || out.ctype == 6) out.tabs[type] = [rUs(data, offset), rUs(data, offset + 2), rUs(data, offset + 4)];else if (out.ctype == 3) out.tabs[type] = data[offset];\n        } else if (type == \"IEND\") {\n          if (foff != 0) {\n            var fr = out.frames[out.frames.length - 1];\n            fr.data = UPNG.decode._decompress(out, fd.slice(0, foff), fr.rect.width, fr.rect.height);\n            foff = 0;\n          }\n          out.data = UPNG.decode._decompress(out, dd, out.width, out.height);\n          break;\n        }\n        //else {  log(\"unknown chunk type\", type, len);  }\n        offset += len;\n        var crc = bin.readUint(data, offset);\n        offset += 4;\n      }\n      delete out.compress;\n      delete out.interlace;\n      delete out.filter;\n      return out;\n    };\n    UPNG.decode._decompress = function (out, dd, w, h) {\n      if (out.compress == 0) dd = UPNG.decode._inflate(dd);\n      if (out.interlace == 0) dd = UPNG.decode._filterZero(dd, out, 0, w, h);else if (out.interlace == 1) dd = UPNG.decode._readInterlace(dd, out);\n      return dd;\n    };\n    UPNG.decode._inflate = function (data) {\n      return pako[\"inflate\"](data);\n    };\n    UPNG.decode._readInterlace = function (data, out) {\n      var w = out.width,\n        h = out.height;\n      var bpp = UPNG.decode._getBPP(out),\n        cbpp = bpp >> 3,\n        bpl = Math.ceil(w * bpp / 8);\n      var img = new Uint8Array(h * bpl);\n      var di = 0;\n      var starting_row = [0, 0, 4, 0, 2, 0, 1];\n      var starting_col = [0, 4, 0, 2, 0, 1, 0];\n      var row_increment = [8, 8, 8, 4, 4, 2, 2];\n      var col_increment = [8, 8, 4, 4, 2, 2, 1];\n      var pass = 0;\n      while (pass < 7) {\n        var ri = row_increment[pass],\n          ci = col_increment[pass];\n        var sw = 0,\n          sh = 0;\n        var cr = starting_row[pass];\n        while (cr < h) {\n          cr += ri;\n          sh++;\n        }\n        var cc = starting_col[pass];\n        while (cc < w) {\n          cc += ci;\n          sw++;\n        }\n        var bpll = Math.ceil(sw * bpp / 8);\n        UPNG.decode._filterZero(data, out, di, sw, sh);\n        var y = 0,\n          row = starting_row[pass];\n        while (row < h) {\n          var col = starting_col[pass];\n          var cdi = di + y * bpll << 3;\n          while (col < w) {\n            if (bpp == 1) {\n              var val = data[cdi >> 3];\n              val = val >> 7 - (cdi & 7) & 1;\n              img[row * bpl + (col >> 3)] |= val << 7 - ((col & 3) << 0);\n            }\n            if (bpp == 2) {\n              var val = data[cdi >> 3];\n              val = val >> 6 - (cdi & 7) & 3;\n              img[row * bpl + (col >> 2)] |= val << 6 - ((col & 3) << 1);\n            }\n            if (bpp == 4) {\n              var val = data[cdi >> 3];\n              val = val >> 4 - (cdi & 7) & 15;\n              img[row * bpl + (col >> 1)] |= val << 4 - ((col & 1) << 2);\n            }\n            if (bpp >= 8) {\n              var ii = row * bpl + col * cbpp;\n              for (var j = 0; j < cbpp; j++) img[ii + j] = data[(cdi >> 3) + j];\n            }\n            cdi += bpp;\n            col += ci;\n          }\n          y++;\n          row += ri;\n        }\n        if (sw * sh != 0) di += sh * (1 + bpll);\n        pass = pass + 1;\n      }\n      return img;\n    };\n    UPNG.decode._getBPP = function (out) {\n      var noc = [1, null, 3, 1, 2, null, 4][out.ctype];\n      return noc * out.depth;\n    };\n    UPNG.decode._filterZero = function (data, out, off, w, h) {\n      var bpp = UPNG.decode._getBPP(out),\n        bpl = Math.ceil(w * bpp / 8),\n        paeth = UPNG.decode._paeth;\n      bpp = Math.ceil(bpp / 8);\n      for (var y = 0; y < h; y++) {\n        var i = off + y * bpl,\n          di = i + y + 1;\n        var type = data[di - 1];\n        if (type == 0) for (var x = 0; x < bpl; x++) data[i + x] = data[di + x];else if (type == 1) {\n          for (var x = 0; x < bpp; x++) data[i + x] = data[di + x];\n          for (var x = bpp; x < bpl; x++) data[i + x] = data[di + x] + data[i + x - bpp] & 255;\n        } else if (y == 0) {\n          for (var x = 0; x < bpp; x++) data[i + x] = data[di + x];\n          if (type == 2) for (var x = bpp; x < bpl; x++) data[i + x] = data[di + x] & 255;\n          if (type == 3) for (var x = bpp; x < bpl; x++) data[i + x] = data[di + x] + (data[i + x - bpp] >> 1) & 255;\n          if (type == 4) for (var x = bpp; x < bpl; x++) data[i + x] = data[di + x] + paeth(data[i + x - bpp], 0, 0) & 255;\n        } else {\n          if (type == 2) {\n            for (var x = 0; x < bpl; x++) data[i + x] = data[di + x] + data[i + x - bpl] & 255;\n          }\n          if (type == 3) {\n            for (var x = 0; x < bpp; x++) data[i + x] = data[di + x] + (data[i + x - bpl] >> 1) & 255;\n            for (var x = bpp; x < bpl; x++) data[i + x] = data[di + x] + (data[i + x - bpl] + data[i + x - bpp] >> 1) & 255;\n          }\n          if (type == 4) {\n            for (var x = 0; x < bpp; x++) data[i + x] = data[di + x] + paeth(0, data[i + x - bpl], 0) & 255;\n            for (var x = bpp; x < bpl; x++) data[i + x] = data[di + x] + paeth(data[i + x - bpp], data[i + x - bpl], data[i + x - bpp - bpl]) & 255;\n          }\n        }\n      }\n      return data;\n    };\n    UPNG.decode._paeth = function (a, b, c) {\n      var p = a + b - c,\n        pa = Math.abs(p - a),\n        pb = Math.abs(p - b),\n        pc = Math.abs(p - c);\n      if (pa <= pb && pa <= pc) return a;else if (pb <= pc) return b;\n      return c;\n    };\n    UPNG.decode._IHDR = function (data, offset, out) {\n      var bin = UPNG._bin;\n      out.width = bin.readUint(data, offset);\n      offset += 4;\n      out.height = bin.readUint(data, offset);\n      offset += 4;\n      out.depth = data[offset];\n      offset++;\n      out.ctype = data[offset];\n      offset++;\n      out.compress = data[offset];\n      offset++;\n      out.filter = data[offset];\n      offset++;\n      out.interlace = data[offset];\n      offset++;\n    };\n    UPNG._bin = {\n      nextZero: function (data, p) {\n        while (data[p] != 0) p++;\n        return p;\n      },\n      readUshort: function (buff, p) {\n        return buff[p] << 8 | buff[p + 1];\n      },\n      writeUshort: function (buff, p, n) {\n        buff[p] = n >> 8 & 255;\n        buff[p + 1] = n & 255;\n      },\n      readUint: function (buff, p) {\n        return buff[p] * (256 * 256 * 256) + (buff[p + 1] << 16 | buff[p + 2] << 8 | buff[p + 3]);\n      },\n      writeUint: function (buff, p, n) {\n        buff[p] = n >> 24 & 255;\n        buff[p + 1] = n >> 16 & 255;\n        buff[p + 2] = n >> 8 & 255;\n        buff[p + 3] = n & 255;\n      },\n      readASCII: function (buff, p, l) {\n        var s = \"\";\n        for (var i = 0; i < l; i++) s += String.fromCharCode(buff[p + i]);\n        return s;\n      },\n      writeASCII: function (data, p, s) {\n        for (var i = 0; i < s.length; i++) data[p + i] = s.charCodeAt(i);\n      },\n      readBytes: function (buff, p, l) {\n        var arr = [];\n        for (var i = 0; i < l; i++) arr.push(buff[p + i]);\n        return arr;\n      },\n      pad: function (n) {\n        return n.length < 2 ? \"0\" + n : n;\n      },\n      readUTF8: function (buff, p, l) {\n        var s = \"\",\n          ns;\n        for (var i = 0; i < l; i++) s += \"%\" + UPNG._bin.pad(buff[p + i].toString(16));\n        try {\n          ns = decodeURIComponent(s);\n        } catch (e) {\n          return UPNG._bin.readASCII(buff, p, l);\n        }\n        return ns;\n      }\n    };\n    UPNG._copyTile = function (sb, sw, sh, tb, tw, th, xoff, yoff, mode) {\n      var w = Math.min(sw, tw),\n        h = Math.min(sh, th);\n      var si = 0,\n        ti = 0;\n      for (var y = 0; y < h; y++) for (var x = 0; x < w; x++) {\n        if (xoff >= 0 && yoff >= 0) {\n          si = y * sw + x << 2;\n          ti = (yoff + y) * tw + xoff + x << 2;\n        } else {\n          si = (-yoff + y) * sw - xoff + x << 2;\n          ti = y * tw + x << 2;\n        }\n        if (mode == 0) {\n          tb[ti] = sb[si];\n          tb[ti + 1] = sb[si + 1];\n          tb[ti + 2] = sb[si + 2];\n          tb[ti + 3] = sb[si + 3];\n        } else if (mode == 1) {\n          var fa = sb[si + 3] * (1 / 255),\n            fr = sb[si] * fa,\n            fg = sb[si + 1] * fa,\n            fb = sb[si + 2] * fa;\n          var ba = tb[ti + 3] * (1 / 255),\n            br = tb[ti] * ba,\n            bg = tb[ti + 1] * ba,\n            bb = tb[ti + 2] * ba;\n          var ifa = 1 - fa,\n            oa = fa + ba * ifa,\n            ioa = oa == 0 ? 0 : 1 / oa;\n          tb[ti + 3] = 255 * oa;\n          tb[ti + 0] = (fr + br * ifa) * ioa;\n          tb[ti + 1] = (fg + bg * ifa) * ioa;\n          tb[ti + 2] = (fb + bb * ifa) * ioa;\n        } else if (mode == 2) {\n          // copy only differences, otherwise zero\n          var fa = sb[si + 3],\n            fr = sb[si],\n            fg = sb[si + 1],\n            fb = sb[si + 2];\n          var ba = tb[ti + 3],\n            br = tb[ti],\n            bg = tb[ti + 1],\n            bb = tb[ti + 2];\n          if (fa == ba && fr == br && fg == bg && fb == bb) {\n            tb[ti] = 0;\n            tb[ti + 1] = 0;\n            tb[ti + 2] = 0;\n            tb[ti + 3] = 0;\n          } else {\n            tb[ti] = fr;\n            tb[ti + 1] = fg;\n            tb[ti + 2] = fb;\n            tb[ti + 3] = fa;\n          }\n        } else if (mode == 3) {\n          // check if can be blended\n          var fa = sb[si + 3],\n            fr = sb[si],\n            fg = sb[si + 1],\n            fb = sb[si + 2];\n          var ba = tb[ti + 3],\n            br = tb[ti],\n            bg = tb[ti + 1],\n            bb = tb[ti + 2];\n          if (fa == ba && fr == br && fg == bg && fb == bb) continue;\n          //if(fa!=255 && ba!=0) return false;\n          if (fa < 220 && ba > 20) return false;\n        }\n      }\n      return true;\n    };\n    UPNG.encode = function (bufs, w, h, ps, dels, forbidPlte) {\n      if (ps == null) ps = 0;\n      if (forbidPlte == null) forbidPlte = false;\n      var data = new Uint8Array(bufs[0].byteLength * bufs.length + 100);\n      var wr = [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a];\n      for (var i = 0; i < 8; i++) data[i] = wr[i];\n      var offset = 8,\n        bin = UPNG._bin,\n        crc = UPNG.crc.crc,\n        wUi = bin.writeUint,\n        wUs = bin.writeUshort,\n        wAs = bin.writeASCII;\n      var nimg = UPNG.encode.compressPNG(bufs, w, h, ps, forbidPlte);\n      wUi(data, offset, 13);\n      offset += 4;\n      wAs(data, offset, \"IHDR\");\n      offset += 4;\n      wUi(data, offset, w);\n      offset += 4;\n      wUi(data, offset, h);\n      offset += 4;\n      data[offset] = nimg.depth;\n      offset++; // depth\n      data[offset] = nimg.ctype;\n      offset++; // ctype\n      data[offset] = 0;\n      offset++; // compress\n      data[offset] = 0;\n      offset++; // filter\n      data[offset] = 0;\n      offset++; // interlace\n      wUi(data, offset, crc(data, offset - 17, 17));\n      offset += 4; // crc\n\n      // 9 bytes to say, that it is sRGB\n      wUi(data, offset, 1);\n      offset += 4;\n      wAs(data, offset, \"sRGB\");\n      offset += 4;\n      data[offset] = 1;\n      offset++;\n      wUi(data, offset, crc(data, offset - 5, 5));\n      offset += 4; // crc\n\n      var anim = bufs.length > 1;\n      if (anim) {\n        wUi(data, offset, 8);\n        offset += 4;\n        wAs(data, offset, \"acTL\");\n        offset += 4;\n        wUi(data, offset, bufs.length);\n        offset += 4;\n        wUi(data, offset, 0);\n        offset += 4;\n        wUi(data, offset, crc(data, offset - 12, 12));\n        offset += 4; // crc\n      }\n      if (nimg.ctype == 3) {\n        var dl = nimg.plte.length;\n        wUi(data, offset, dl * 3);\n        offset += 4;\n        wAs(data, offset, \"PLTE\");\n        offset += 4;\n        for (var i = 0; i < dl; i++) {\n          var ti = i * 3,\n            c = nimg.plte[i],\n            r = c & 255,\n            g = c >> 8 & 255,\n            b = c >> 16 & 255;\n          data[offset + ti + 0] = r;\n          data[offset + ti + 1] = g;\n          data[offset + ti + 2] = b;\n        }\n        offset += dl * 3;\n        wUi(data, offset, crc(data, offset - dl * 3 - 4, dl * 3 + 4));\n        offset += 4; // crc\n\n        if (nimg.gotAlpha) {\n          wUi(data, offset, dl);\n          offset += 4;\n          wAs(data, offset, \"tRNS\");\n          offset += 4;\n          for (var i = 0; i < dl; i++) data[offset + i] = nimg.plte[i] >> 24 & 255;\n          offset += dl;\n          wUi(data, offset, crc(data, offset - dl - 4, dl + 4));\n          offset += 4; // crc\n        }\n      }\n      var fi = 0;\n      for (var j = 0; j < nimg.frames.length; j++) {\n        var fr = nimg.frames[j];\n        if (anim) {\n          wUi(data, offset, 26);\n          offset += 4;\n          wAs(data, offset, \"fcTL\");\n          offset += 4;\n          wUi(data, offset, fi++);\n          offset += 4;\n          wUi(data, offset, fr.rect.width);\n          offset += 4;\n          wUi(data, offset, fr.rect.height);\n          offset += 4;\n          wUi(data, offset, fr.rect.x);\n          offset += 4;\n          wUi(data, offset, fr.rect.y);\n          offset += 4;\n          wUs(data, offset, dels[j]);\n          offset += 2;\n          wUs(data, offset, 1000);\n          offset += 2;\n          data[offset] = fr.dispose;\n          offset++; // dispose\n          data[offset] = fr.blend;\n          offset++; // blend\n          wUi(data, offset, crc(data, offset - 30, 30));\n          offset += 4; // crc\n        }\n        var imgd = fr.cimg,\n          dl = imgd.length;\n        wUi(data, offset, dl + (j == 0 ? 0 : 4));\n        offset += 4;\n        var ioff = offset;\n        wAs(data, offset, j == 0 ? \"IDAT\" : \"fdAT\");\n        offset += 4;\n        if (j != 0) {\n          wUi(data, offset, fi++);\n          offset += 4;\n        }\n        for (var i = 0; i < dl; i++) data[offset + i] = imgd[i];\n        offset += dl;\n        wUi(data, offset, crc(data, ioff, offset - ioff));\n        offset += 4; // crc\n      }\n      wUi(data, offset, 0);\n      offset += 4;\n      wAs(data, offset, \"IEND\");\n      offset += 4;\n      wUi(data, offset, crc(data, offset - 4, 4));\n      offset += 4; // crc\n\n      return data.buffer.slice(0, offset);\n    };\n    UPNG.encode.compressPNG = function (bufs, w, h, ps, forbidPlte) {\n      var out = UPNG.encode.compress(bufs, w, h, ps, false, forbidPlte);\n      for (var i = 0; i < bufs.length; i++) {\n        var frm = out.frames[i],\n          nw = frm.rect.width,\n          nh = frm.rect.height,\n          bpl = frm.bpl,\n          bpp = frm.bpp;\n        var fdata = new Uint8Array(nh * bpl + nh);\n        frm.cimg = UPNG.encode._filterZero(frm.img, nh, bpp, bpl, fdata);\n      }\n      return out;\n    };\n    UPNG.encode.compress = function (bufs, w, h, ps, forGIF, forbidPlte) {\n      if (forbidPlte == null) forbidPlte = false;\n      var ctype = 6,\n        depth = 8,\n        bpp = 4,\n        alphaAnd = 255;\n      for (var j = 0; j < bufs.length; j++) {\n        // when not quantized, other frames can contain colors, that are not in an initial frame\n        var img = new Uint8Array(bufs[j]),\n          ilen = img.length;\n        for (var i = 0; i < ilen; i += 4) alphaAnd &= img[i + 3];\n      }\n      var gotAlpha = alphaAnd != 255;\n      var cmap = {},\n        plte = [];\n      if (bufs.length != 0) {\n        cmap[0] = 0;\n        plte.push(0);\n        if (ps != 0) ps--;\n      }\n      if (ps != 0) {\n        var qres = UPNG.quantize(bufs, ps, forGIF);\n        bufs = qres.bufs;\n        for (var i = 0; i < qres.plte.length; i++) {\n          var c = qres.plte[i].est.rgba;\n          if (cmap[c] == null) {\n            cmap[c] = plte.length;\n            plte.push(c);\n          }\n        }\n      } else {\n        // what if ps==0, but there are <=256 colors?  we still need to detect, if the palette could be used\n        for (var j = 0; j < bufs.length; j++) {\n          // when not quantized, other frames can contain colors, that are not in an initial frame\n          var img32 = new Uint32Array(bufs[j]),\n            ilen = img32.length;\n          for (var i = 0; i < ilen; i++) {\n            var c = img32[i];\n            if ((i < w || c != img32[i - 1] && c != img32[i - w]) && cmap[c] == null) {\n              cmap[c] = plte.length;\n              plte.push(c);\n              if (plte.length >= 300) break;\n            }\n          }\n        }\n      }\n      var brute = gotAlpha ? forGIF : false; // brute : frames can only be copied, not \"blended\"\n      var cc = plte.length; //console.log(cc);\n      if (cc <= 256 && forbidPlte == false) {\n        if (cc <= 2) depth = 1;else if (cc <= 4) depth = 2;else if (cc <= 16) depth = 4;else depth = 8;\n        if (forGIF) depth = 8;\n        gotAlpha = true;\n      }\n      var frms = [];\n      for (var j = 0; j < bufs.length; j++) {\n        var cimg = new Uint8Array(bufs[j]),\n          cimg32 = new Uint32Array(cimg.buffer);\n        var nx = 0,\n          ny = 0,\n          nw = w,\n          nh = h,\n          blend = 0;\n        if (j != 0 && !brute) {\n          var tlim = forGIF || j == 1 || frms[frms.length - 2].dispose == 2 ? 1 : 2,\n            tstp = 0,\n            tarea = 1e9;\n          for (var it = 0; it < tlim; it++) {\n            var pimg = new Uint8Array(bufs[j - 1 - it]),\n              p32 = new Uint32Array(bufs[j - 1 - it]);\n            var mix = w,\n              miy = h,\n              max = -1,\n              may = -1;\n            for (var y = 0; y < h; y++) for (var x = 0; x < w; x++) {\n              var i = y * w + x;\n              if (cimg32[i] != p32[i]) {\n                if (x < mix) mix = x;\n                if (x > max) max = x;\n                if (y < miy) miy = y;\n                if (y > may) may = y;\n              }\n            }\n            var sarea = max == -1 ? 1 : (max - mix + 1) * (may - miy + 1);\n            if (sarea < tarea) {\n              tarea = sarea;\n              tstp = it;\n              if (max == -1) {\n                nx = ny = 0;\n                nw = nh = 1;\n              } else {\n                nx = mix;\n                ny = miy;\n                nw = max - mix + 1;\n                nh = may - miy + 1;\n              }\n            }\n          }\n          var pimg = new Uint8Array(bufs[j - 1 - tstp]);\n          if (tstp == 1) frms[frms.length - 1].dispose = 2;\n          var nimg = new Uint8Array(nw * nh * 4),\n            nimg32 = new Uint32Array(nimg.buffer);\n          UPNG._copyTile(pimg, w, h, nimg, nw, nh, -nx, -ny, 0);\n          if (UPNG._copyTile(cimg, w, h, nimg, nw, nh, -nx, -ny, 3)) {\n            UPNG._copyTile(cimg, w, h, nimg, nw, nh, -nx, -ny, 2);\n            blend = 1;\n          } else {\n            UPNG._copyTile(cimg, w, h, nimg, nw, nh, -nx, -ny, 0);\n            blend = 0;\n          }\n          cimg = nimg;\n          cimg32 = new Uint32Array(cimg.buffer);\n        }\n        var bpl = 4 * nw;\n        if (cc <= 256 && forbidPlte == false) {\n          bpl = Math.ceil(depth * nw / 8);\n          var nimg = new Uint8Array(bpl * nh);\n          for (var y = 0; y < nh; y++) {\n            var i = y * bpl,\n              ii = y * nw;\n            if (depth == 8) for (var x = 0; x < nw; x++) nimg[i + x] = cmap[cimg32[ii + x]];else if (depth == 4) for (var x = 0; x < nw; x++) nimg[i + (x >> 1)] |= cmap[cimg32[ii + x]] << 4 - (x & 1) * 4;else if (depth == 2) for (var x = 0; x < nw; x++) nimg[i + (x >> 2)] |= cmap[cimg32[ii + x]] << 6 - (x & 3) * 2;else if (depth == 1) for (var x = 0; x < nw; x++) nimg[i + (x >> 3)] |= cmap[cimg32[ii + x]] << 7 - (x & 7) * 1;\n          }\n          cimg = nimg;\n          ctype = 3;\n          bpp = 1;\n        } else if (gotAlpha == false && bufs.length == 1) {\n          // some next \"reduced\" frames may contain alpha for blending\n          var nimg = new Uint8Array(nw * nh * 3),\n            area = nw * nh;\n          for (var i = 0; i < area; i++) {\n            var ti = i * 3,\n              qi = i * 4;\n            nimg[ti] = cimg[qi];\n            nimg[ti + 1] = cimg[qi + 1];\n            nimg[ti + 2] = cimg[qi + 2];\n          }\n          cimg = nimg;\n          ctype = 2;\n          bpp = 3;\n          bpl = 3 * nw;\n        }\n        frms.push({\n          rect: {\n            x: nx,\n            y: ny,\n            width: nw,\n            height: nh\n          },\n          img: cimg,\n          bpl: bpl,\n          bpp: bpp,\n          blend: blend,\n          dispose: brute ? 1 : 0\n        });\n      }\n      return {\n        ctype: ctype,\n        depth: depth,\n        plte: plte,\n        gotAlpha: gotAlpha,\n        frames: frms\n      };\n    };\n    UPNG.encode._filterZero = function (img, h, bpp, bpl, data) {\n      var fls = [];\n      for (var t = 0; t < 5; t++) {\n        if (h * bpl > 500000 && (t == 2 || t == 3 || t == 4)) continue;\n        for (var y = 0; y < h; y++) UPNG.encode._filterLine(data, img, y, bpl, bpp, t);\n        fls.push(pako[\"deflate\"](data));\n        if (bpp == 1) break;\n      }\n      var ti,\n        tsize = 1e9;\n      for (var i = 0; i < fls.length; i++) if (fls[i].length < tsize) {\n        ti = i;\n        tsize = fls[i].length;\n      }\n      return fls[ti];\n    };\n    UPNG.encode._filterLine = function (data, img, y, bpl, bpp, type) {\n      var i = y * bpl,\n        di = i + y,\n        paeth = UPNG.decode._paeth;\n      data[di] = type;\n      di++;\n      if (type == 0) for (var x = 0; x < bpl; x++) data[di + x] = img[i + x];else if (type == 1) {\n        for (var x = 0; x < bpp; x++) data[di + x] = img[i + x];\n        for (var x = bpp; x < bpl; x++) data[di + x] = img[i + x] - img[i + x - bpp] + 256 & 255;\n      } else if (y == 0) {\n        for (var x = 0; x < bpp; x++) data[di + x] = img[i + x];\n        if (type == 2) for (var x = bpp; x < bpl; x++) data[di + x] = img[i + x];\n        if (type == 3) for (var x = bpp; x < bpl; x++) data[di + x] = img[i + x] - (img[i + x - bpp] >> 1) + 256 & 255;\n        if (type == 4) for (var x = bpp; x < bpl; x++) data[di + x] = img[i + x] - paeth(img[i + x - bpp], 0, 0) + 256 & 255;\n      } else {\n        if (type == 2) {\n          for (var x = 0; x < bpl; x++) data[di + x] = img[i + x] + 256 - img[i + x - bpl] & 255;\n        }\n        if (type == 3) {\n          for (var x = 0; x < bpp; x++) data[di + x] = img[i + x] + 256 - (img[i + x - bpl] >> 1) & 255;\n          for (var x = bpp; x < bpl; x++) data[di + x] = img[i + x] + 256 - (img[i + x - bpl] + img[i + x - bpp] >> 1) & 255;\n        }\n        if (type == 4) {\n          for (var x = 0; x < bpp; x++) data[di + x] = img[i + x] + 256 - paeth(0, img[i + x - bpl], 0) & 255;\n          for (var x = bpp; x < bpl; x++) data[di + x] = img[i + x] + 256 - paeth(img[i + x - bpp], img[i + x - bpl], img[i + x - bpp - bpl]) & 255;\n        }\n      }\n    };\n    UPNG.crc = {\n      table: function () {\n        var tab = new Uint32Array(256);\n        for (var n = 0; n < 256; n++) {\n          var c = n;\n          for (var k = 0; k < 8; k++) {\n            if (c & 1) c = 0xedb88320 ^ c >>> 1;else c = c >>> 1;\n          }\n          tab[n] = c;\n        }\n        return tab;\n      }(),\n      update: function (c, buf, off, len) {\n        for (var i = 0; i < len; i++) c = UPNG.crc.table[(c ^ buf[off + i]) & 0xff] ^ c >>> 8;\n        return c;\n      },\n      crc: function (b, o, l) {\n        return UPNG.crc.update(0xffffffff, b, o, l) ^ 0xffffffff;\n      }\n    };\n    UPNG.quantize = function (bufs, ps, roundAlpha) {\n      var imgs = [],\n        totl = 0;\n      for (var i = 0; i < bufs.length; i++) {\n        imgs.push(UPNG.encode.alphaMul(new Uint8Array(bufs[i]), roundAlpha));\n        totl += bufs[i].byteLength;\n      }\n      var nimg = new Uint8Array(totl),\n        nimg32 = new Uint32Array(nimg.buffer),\n        noff = 0;\n      for (var i = 0; i < imgs.length; i++) {\n        var img = imgs[i],\n          il = img.length;\n        for (var j = 0; j < il; j++) nimg[noff + j] = img[j];\n        noff += il;\n      }\n      var root = {\n        i0: 0,\n        i1: nimg.length,\n        bst: null,\n        est: null,\n        tdst: 0,\n        left: null,\n        right: null\n      }; // basic statistic, extra statistic\n      root.bst = UPNG.quantize.stats(nimg, root.i0, root.i1);\n      root.est = UPNG.quantize.estats(root.bst);\n      var leafs = [root];\n      while (leafs.length < ps) {\n        var maxL = 0,\n          mi = 0;\n        for (var i = 0; i < leafs.length; i++) if (leafs[i].est.L > maxL) {\n          maxL = leafs[i].est.L;\n          mi = i;\n        }\n        if (maxL < 1e-3) break;\n        var node = leafs[mi];\n        var s0 = UPNG.quantize.splitPixels(nimg, nimg32, node.i0, node.i1, node.est.e, node.est.eMq255);\n        var ln = {\n          i0: node.i0,\n          i1: s0,\n          bst: null,\n          est: null,\n          tdst: 0,\n          left: null,\n          right: null\n        };\n        ln.bst = UPNG.quantize.stats(nimg, ln.i0, ln.i1);\n        ln.est = UPNG.quantize.estats(ln.bst);\n        var rn = {\n          i0: s0,\n          i1: node.i1,\n          bst: null,\n          est: null,\n          tdst: 0,\n          left: null,\n          right: null\n        };\n        rn.bst = {\n          R: [],\n          m: [],\n          N: node.bst.N - ln.bst.N\n        };\n        for (var i = 0; i < 16; i++) rn.bst.R[i] = node.bst.R[i] - ln.bst.R[i];\n        for (var i = 0; i < 4; i++) rn.bst.m[i] = node.bst.m[i] - ln.bst.m[i];\n        rn.est = UPNG.quantize.estats(rn.bst);\n        node.left = ln;\n        node.right = rn;\n        leafs[mi] = ln;\n        leafs.push(rn);\n      }\n      leafs.sort(function (a, b) {\n        return b.bst.N - a.bst.N;\n      });\n      for (var ii = 0; ii < imgs.length; ii++) {\n        var planeDst = UPNG.quantize.planeDst;\n        var sb = new Uint8Array(imgs[ii].buffer),\n          tb = new Uint32Array(imgs[ii].buffer),\n          len = sb.length;\n        var stack = [],\n          si = 0;\n        for (var i = 0; i < len; i += 4) {\n          var r = sb[i] * (1 / 255),\n            g = sb[i + 1] * (1 / 255),\n            b = sb[i + 2] * (1 / 255),\n            a = sb[i + 3] * (1 / 255);\n\n          //  exact, but too slow :(\n          //var nd = UPNG.quantize.getNearest(root, r, g, b, a);\n          var nd = root;\n          while (nd.left) nd = planeDst(nd.est, r, g, b, a) <= 0 ? nd.left : nd.right;\n          tb[i >> 2] = nd.est.rgba;\n        }\n        imgs[ii] = tb.buffer;\n      }\n      return {\n        bufs: imgs,\n        plte: leafs\n      };\n    };\n    UPNG.quantize.getNearest = function (nd, r, g, b, a) {\n      if (nd.left == null) {\n        nd.tdst = UPNG.quantize.dist(nd.est.q, r, g, b, a);\n        return nd;\n      }\n      var planeDst = UPNG.quantize.planeDst(nd.est, r, g, b, a);\n      var node0 = nd.left,\n        node1 = nd.right;\n      if (planeDst > 0) {\n        node0 = nd.right;\n        node1 = nd.left;\n      }\n      var ln = UPNG.quantize.getNearest(node0, r, g, b, a);\n      if (ln.tdst <= planeDst * planeDst) return ln;\n      var rn = UPNG.quantize.getNearest(node1, r, g, b, a);\n      return rn.tdst < ln.tdst ? rn : ln;\n    };\n    UPNG.quantize.planeDst = function (est, r, g, b, a) {\n      var e = est.e;\n      return e[0] * r + e[1] * g + e[2] * b + e[3] * a - est.eMq;\n    };\n    UPNG.quantize.dist = function (q, r, g, b, a) {\n      var d0 = r - q[0],\n        d1 = g - q[1],\n        d2 = b - q[2],\n        d3 = a - q[3];\n      return d0 * d0 + d1 * d1 + d2 * d2 + d3 * d3;\n    };\n    UPNG.quantize.splitPixels = function (nimg, nimg32, i0, i1, e, eMq) {\n      var vecDot = UPNG.quantize.vecDot;\n      i1 -= 4;\n      var shfs = 0;\n      while (i0 < i1) {\n        while (vecDot(nimg, i0, e) <= eMq) i0 += 4;\n        while (vecDot(nimg, i1, e) > eMq) i1 -= 4;\n        if (i0 >= i1) break;\n        var t = nimg32[i0 >> 2];\n        nimg32[i0 >> 2] = nimg32[i1 >> 2];\n        nimg32[i1 >> 2] = t;\n        i0 += 4;\n        i1 -= 4;\n      }\n      while (vecDot(nimg, i0, e) > eMq) i0 -= 4;\n      return i0 + 4;\n    };\n    UPNG.quantize.vecDot = function (nimg, i, e) {\n      return nimg[i] * e[0] + nimg[i + 1] * e[1] + nimg[i + 2] * e[2] + nimg[i + 3] * e[3];\n    };\n    UPNG.quantize.stats = function (nimg, i0, i1) {\n      var R = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n      var m = [0, 0, 0, 0];\n      var N = i1 - i0 >> 2;\n      for (var i = i0; i < i1; i += 4) {\n        var r = nimg[i] * (1 / 255),\n          g = nimg[i + 1] * (1 / 255),\n          b = nimg[i + 2] * (1 / 255),\n          a = nimg[i + 3] * (1 / 255);\n        //var r = nimg[i], g = nimg[i+1], b = nimg[i+2], a = nimg[i+3];\n        m[0] += r;\n        m[1] += g;\n        m[2] += b;\n        m[3] += a;\n        R[0] += r * r;\n        R[1] += r * g;\n        R[2] += r * b;\n        R[3] += r * a;\n        R[5] += g * g;\n        R[6] += g * b;\n        R[7] += g * a;\n        R[10] += b * b;\n        R[11] += b * a;\n        R[15] += a * a;\n      }\n      R[4] = R[1];\n      R[8] = R[2];\n      R[12] = R[3];\n      R[9] = R[6];\n      R[13] = R[7];\n      R[14] = R[11];\n      return {\n        R: R,\n        m: m,\n        N: N\n      };\n    };\n    UPNG.quantize.estats = function (stats) {\n      var R = stats.R,\n        m = stats.m,\n        N = stats.N;\n      var m0 = m[0],\n        m1 = m[1],\n        m2 = m[2],\n        m3 = m[3],\n        iN = N == 0 ? 0 : 1 / N;\n      var Rj = [R[0] - m0 * m0 * iN, R[1] - m0 * m1 * iN, R[2] - m0 * m2 * iN, R[3] - m0 * m3 * iN, R[4] - m1 * m0 * iN, R[5] - m1 * m1 * iN, R[6] - m1 * m2 * iN, R[7] - m1 * m3 * iN, R[8] - m2 * m0 * iN, R[9] - m2 * m1 * iN, R[10] - m2 * m2 * iN, R[11] - m2 * m3 * iN, R[12] - m3 * m0 * iN, R[13] - m3 * m1 * iN, R[14] - m3 * m2 * iN, R[15] - m3 * m3 * iN];\n      var A = Rj,\n        M = UPNG.M4;\n      var b = [0.5, 0.5, 0.5, 0.5],\n        mi = 0,\n        tmi = 0;\n      if (N != 0) for (var i = 0; i < 10; i++) {\n        b = M.multVec(A, b);\n        tmi = Math.sqrt(M.dot(b, b));\n        b = M.sml(1 / tmi, b);\n        if (Math.abs(tmi - mi) < 1e-9) break;\n        mi = tmi;\n      }\n      //b = [0,0,1,0];  mi=N;\n      var q = [m0 * iN, m1 * iN, m2 * iN, m3 * iN];\n      var eMq255 = M.dot(M.sml(255, q), b);\n      var ia = q[3] < 0.001 ? 0 : 1 / q[3];\n      return {\n        Cov: Rj,\n        q: q,\n        e: b,\n        L: mi,\n        eMq255: eMq255,\n        eMq: M.dot(b, q),\n        rgba: (Math.round(255 * q[3]) << 24 | Math.round(255 * q[2] * ia) << 16 | Math.round(255 * q[1] * ia) << 8 | Math.round(255 * q[0] * ia) << 0) >>> 0\n      };\n    };\n    UPNG.M4 = {\n      multVec: function (m, v) {\n        return [m[0] * v[0] + m[1] * v[1] + m[2] * v[2] + m[3] * v[3], m[4] * v[0] + m[5] * v[1] + m[6] * v[2] + m[7] * v[3], m[8] * v[0] + m[9] * v[1] + m[10] * v[2] + m[11] * v[3], m[12] * v[0] + m[13] * v[1] + m[14] * v[2] + m[15] * v[3]];\n      },\n      dot: function (x, y) {\n        return x[0] * y[0] + x[1] * y[1] + x[2] * y[2] + x[3] * y[3];\n      },\n      sml: function (a, y) {\n        return [a * y[0], a * y[1], a * y[2], a * y[3]];\n      }\n    };\n    UPNG.encode.alphaMul = function (img, roundA) {\n      var nimg = new Uint8Array(img.length),\n        area = img.length >> 2;\n      for (var i = 0; i < area; i++) {\n        var qi = i << 2,\n          ia = img[qi + 3];\n        if (roundA) ia = ia < 128 ? 0 : 255;\n        var a = ia * (1 / 255);\n        nimg[qi + 0] = img[qi + 0] * a;\n        nimg[qi + 1] = img[qi + 1] * a;\n        nimg[qi + 2] = img[qi + 2] * a;\n        nimg[qi + 3] = ia;\n      }\n      return nimg;\n    };\n  })(UPNG, pako);\n})();","map":{"version":3,"names":["UPNG","pako","module","exports","window","require","log","process","env","NODE_ENV","console","apply","arguments","toRGBA8","out","w","width","h","height","tabs","acTL","decodeImage","data","buffer","frms","frames","img","empty","Uint8Array","i","length","frm","fx","rect","x","fy","y","fw","fh","fdata","blend","_copyTile","push","slice","dispose","pi","area","bpp","decode","_getBPP","bpl","Math","ceil","bf","bf32","Uint32Array","ctype","depth","rs","_bin","readUshort","qarea","ts","tr","tg","tb","qi","ti","p","ap","tl","s0","t0","j","cj","di","gr","al","buff","offset","bin","rUs","rUi","readUint","dd","doff","fd","foff","mgck","len","type","readASCII","_IHDR","num_frames","num_plays","fr","_decompress","rct","del","delay","round","nz","nextZero","keyw","text","off","cflag","cmeth","ltag","tkeyw","readUTF8","readBytes","pl","crc","compress","interlace","filter","_inflate","_filterZero","_readInterlace","cbpp","starting_row","starting_col","row_increment","col_increment","pass","ri","ci","sw","sh","cr","cc","bpll","row","col","cdi","val","ii","noc","paeth","_paeth","a","b","c","pa","abs","pb","pc","writeUshort","n","writeUint","l","s","String","fromCharCode","writeASCII","charCodeAt","arr","pad","ns","toString","decodeURIComponent","e","sb","tw","th","xoff","yoff","mode","min","si","fa","fg","fb","ba","br","bg","bb","ifa","oa","ioa","encode","bufs","ps","dels","forbidPlte","byteLength","wr","wUi","wUs","wAs","nimg","compressPNG","anim","dl","plte","r","g","gotAlpha","fi","imgd","cimg","ioff","nw","nh","forGIF","alphaAnd","ilen","cmap","qres","quantize","est","rgba","img32","brute","cimg32","nx","ny","tlim","tstp","tarea","it","pimg","p32","mix","miy","max","may","sarea","nimg32","fls","t","_filterLine","tsize","table","tab","k","update","buf","o","roundAlpha","imgs","totl","alphaMul","noff","il","root","i0","i1","bst","tdst","left","right","stats","estats","leafs","maxL","mi","L","node","splitPixels","eMq255","ln","rn","R","m","N","sort","planeDst","stack","nd","getNearest","dist","q","node0","node1","eMq","d0","d1","d2","d3","vecDot","shfs","m0","m1","m2","m3","iN","Rj","A","M","M4","tmi","multVec","sqrt","dot","sml","ia","Cov","v","roundA"],"sources":["/home/kerim/Belgeler/algoritma1/node_modules/upng-js/UPNG.js"],"sourcesContent":["\n;(function(){\nvar UPNG = {};\n\n// Make available for import by `require()`\nvar pako;\nif (typeof module == \"object\") {module.exports = UPNG;}  else {window.UPNG = UPNG;}\nif (typeof require == \"function\") {pako = require(\"pako\");}  else {pako = window.pako;}\nfunction log() { if (typeof process==\"undefined\" || process.env.NODE_ENV==\"development\") console.log.apply(console, arguments);  }\n(function(UPNG, pako){\n\n\t\n\n\t\n\nUPNG.toRGBA8 = function(out)\n{\n\tvar w = out.width, h = out.height;\n\tif(out.tabs.acTL==null) return [UPNG.toRGBA8.decodeImage(out.data, w, h, out).buffer];\n\t\n\tvar frms = [];\n\tif(out.frames[0].data==null) out.frames[0].data = out.data;\n\t\n\tvar img, empty = new Uint8Array(w*h*4);\n\tfor(var i=0; i<out.frames.length; i++)\n\t{\n\t\tvar frm = out.frames[i];\n\t\tvar fx=frm.rect.x, fy=frm.rect.y, fw = frm.rect.width, fh = frm.rect.height;\n\t\tvar fdata = UPNG.toRGBA8.decodeImage(frm.data, fw,fh, out);\n\t\t\n\t\tif(i==0) img = fdata;\n\t\telse if(frm.blend  ==0) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 0);\n\t\telse if(frm.blend  ==1) UPNG._copyTile(fdata, fw, fh, img, w, h, fx, fy, 1);\n\t\t\n\t\tfrms.push(img.buffer);  img = img.slice(0);\n\t\t\n\t\tif     (frm.dispose==0) {}\n\t\telse if(frm.dispose==1) UPNG._copyTile(empty, fw, fh, img, w, h, fx, fy, 0);\n\t\telse if(frm.dispose==2) {\n\t\t\tvar pi = i-1;\n\t\t\twhile(out.frames[pi].dispose==2) pi--;\n\t\t\timg = new Uint8Array(frms[pi]).slice(0);\n\t\t}\n\t}\n\treturn frms;\n}\nUPNG.toRGBA8.decodeImage = function(data, w, h, out)\n{\n\tvar area = w*h, bpp = UPNG.decode._getBPP(out);\n\tvar bpl = Math.ceil(w*bpp/8);\t// bytes per line\n\n\tvar bf = new Uint8Array(area*4), bf32 = new Uint32Array(bf.buffer);\n\tvar ctype = out.ctype, depth = out.depth;\n\tvar rs = UPNG._bin.readUshort;\n\t\n\t//console.log(ctype, depth);\n\n\tif     (ctype==6) { // RGB + alpha\n\t\tvar qarea = area<<2;\n\t\tif(depth== 8) for(var i=0; i<qarea;i++) {  bf[i] = data[i];  /*if((i&3)==3 && data[i]!=0) bf[i]=255;*/ }\n\t\tif(depth==16) for(var i=0; i<qarea;i++) {  bf[i] = data[i<<1];  }\n\t}\n\telse if(ctype==2) {\t// RGB\n\t\tvar ts=out.tabs[\"tRNS\"], tr=-1, tg=-1, tb=-1;\n\t\tif(ts) {  tr=ts[0];  tg=ts[1];  tb=ts[2];  }\n\t\tif(depth== 8) for(var i=0; i<area; i++) {  var qi=i<<2, ti=i*3;  bf[qi] = data[ti];  bf[qi+1] = data[ti+1];  bf[qi+2] = data[ti+2];  bf[qi+3] = 255;\n\t\t\tif(tr!=-1 && data[ti]   ==tr && data[ti+1]   ==tg && data[ti+2]   ==tb) bf[qi+3] = 0;  }\n\t\tif(depth==16) for(var i=0; i<area; i++) {  var qi=i<<2, ti=i*6;  bf[qi] = data[ti];  bf[qi+1] = data[ti+2];  bf[qi+2] = data[ti+4];  bf[qi+3] = 255;\n\t\t\tif(tr!=-1 && rs(data,ti)==tr && rs(data,ti+2)==tg && rs(data,ti+4)==tb) bf[qi+3] = 0;  }\n\t}\n\telse if(ctype==3) {\t// palette\n\t\tvar p=out.tabs[\"PLTE\"], ap=out.tabs[\"tRNS\"], tl=ap?ap.length:0;\n\t\t//console.log(p, ap);\n\t\tif(depth==1) for(var y=0; y<h; y++) {  var s0 = y*bpl, t0 = y*w;\n\t\t\tfor(var i=0; i<w; i++) { var qi=(t0+i)<<2, j=((data[s0+(i>>3)]>>(7-((i&7)<<0)))& 1), cj=3*j;  bf[qi]=p[cj];  bf[qi+1]=p[cj+1];  bf[qi+2]=p[cj+2];  bf[qi+3]=(j<tl)?ap[j]:255;  }\n\t\t}\n\t\tif(depth==2) for(var y=0; y<h; y++) {  var s0 = y*bpl, t0 = y*w;\n\t\t\tfor(var i=0; i<w; i++) { var qi=(t0+i)<<2, j=((data[s0+(i>>2)]>>(6-((i&3)<<1)))& 3), cj=3*j;  bf[qi]=p[cj];  bf[qi+1]=p[cj+1];  bf[qi+2]=p[cj+2];  bf[qi+3]=(j<tl)?ap[j]:255;  }\n\t\t}\n\t\tif(depth==4) for(var y=0; y<h; y++) {  var s0 = y*bpl, t0 = y*w;\n\t\t\tfor(var i=0; i<w; i++) { var qi=(t0+i)<<2, j=((data[s0+(i>>1)]>>(4-((i&1)<<2)))&15), cj=3*j;  bf[qi]=p[cj];  bf[qi+1]=p[cj+1];  bf[qi+2]=p[cj+2];  bf[qi+3]=(j<tl)?ap[j]:255;  }\n\t\t}\n\t\tif(depth==8) for(var i=0; i<area; i++ ) {  var qi=i<<2, j=data[i]                      , cj=3*j;  bf[qi]=p[cj];  bf[qi+1]=p[cj+1];  bf[qi+2]=p[cj+2];  bf[qi+3]=(j<tl)?ap[j]:255;  }\n\t}\n\telse if(ctype==4) {\t// gray + alpha\n\t\tif(depth== 8)  for(var i=0; i<area; i++) {  var qi=i<<2, di=i<<1, gr=data[di];  bf[qi]=gr;  bf[qi+1]=gr;  bf[qi+2]=gr;  bf[qi+3]=data[di+1];  }\n\t\tif(depth==16)  for(var i=0; i<area; i++) {  var qi=i<<2, di=i<<2, gr=data[di];  bf[qi]=gr;  bf[qi+1]=gr;  bf[qi+2]=gr;  bf[qi+3]=data[di+2];  }\n\t}\n\telse if(ctype==0) {\t// gray\n\t\tvar tr = out.tabs[\"tRNS\"] ? out.tabs[\"tRNS\"] : -1;\n\t\tif(depth== 1) for(var i=0; i<area; i++) {  var gr=255*((data[i>>3]>>(7 -((i&7)   )))& 1), al=(gr==tr*255)?0:255;  bf32[i]=(al<<24)|(gr<<16)|(gr<<8)|gr;  }\n\t\tif(depth== 2) for(var i=0; i<area; i++) {  var gr= 85*((data[i>>2]>>(6 -((i&3)<<1)))& 3), al=(gr==tr* 85)?0:255;  bf32[i]=(al<<24)|(gr<<16)|(gr<<8)|gr;  }\n\t\tif(depth== 4) for(var i=0; i<area; i++) {  var gr= 17*((data[i>>1]>>(4 -((i&1)<<2)))&15), al=(gr==tr* 17)?0:255;  bf32[i]=(al<<24)|(gr<<16)|(gr<<8)|gr;  }\n\t\tif(depth== 8) for(var i=0; i<area; i++) {  var gr=data[i  ] , al=(gr           ==tr)?0:255;  bf32[i]=(al<<24)|(gr<<16)|(gr<<8)|gr;  }\n\t\tif(depth==16) for(var i=0; i<area; i++) {  var gr=data[i<<1], al=(rs(data,i<<1)==tr)?0:255;  bf32[i]=(al<<24)|(gr<<16)|(gr<<8)|gr;  }\n\t}\n\treturn bf;\n}\n\n\n\nUPNG.decode = function(buff)\n{\n\tvar data = new Uint8Array(buff), offset = 8, bin = UPNG._bin, rUs = bin.readUshort, rUi = bin.readUint;\n\tvar out = {tabs:{}, frames:[]};\n\tvar dd = new Uint8Array(data.length), doff = 0;\t // put all IDAT data into it\n\tvar fd, foff = 0;\t// frames\n\t\n\tvar mgck = [0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a];\n\tfor(var i=0; i<8; i++) if(data[i]!=mgck[i]) throw \"The input is not a PNG file!\";\n\n\twhile(offset<data.length)\n\t{\n\t\tvar len  = bin.readUint(data, offset);  offset += 4;\n\t\tvar type = bin.readASCII(data, offset, 4);  offset += 4;\n\t\t//log(type,len);\n\t\t\n\t\tif     (type==\"IHDR\")  {  UPNG.decode._IHDR(data, offset, out);  }\n\t\telse if(type==\"IDAT\") {\n\t\t\tfor(var i=0; i<len; i++) dd[doff+i] = data[offset+i];\n\t\t\tdoff += len;\n\t\t}\n\t\telse if(type==\"acTL\")  {\n\t\t\tout.tabs[type] = {  num_frames:rUi(data, offset), num_plays:rUi(data, offset+4)  };\n\t\t\tfd = new Uint8Array(data.length);\n\t\t}\n\t\telse if(type==\"fcTL\")  {\n\t\t\tif(foff!=0) {  var fr = out.frames[out.frames.length-1];\n\t\t\t\tfr.data = UPNG.decode._decompress(out, fd.slice(0,foff), fr.rect.width, fr.rect.height);  foff=0;\n\t\t\t}\n\t\t\tvar rct = {x:rUi(data, offset+12),y:rUi(data, offset+16),width:rUi(data, offset+4),height:rUi(data, offset+8)};\n\t\t\tvar del = rUs(data, offset+22);  del = rUs(data, offset+20) / (del==0?100:del);\n\t\t\tvar frm = {rect:rct, delay:Math.round(del*1000), dispose:data[offset+24], blend:data[offset+25]};\n\t\t\t//console.log(frm);\n\t\t\tout.frames.push(frm);\n\t\t}\n\t\telse if(type==\"fdAT\") {\n\t\t\tfor(var i=0; i<len-4; i++) fd[foff+i] = data[offset+i+4];\n\t\t\tfoff += len-4;\n\t\t}\n\t\telse if(type==\"pHYs\") {\n\t\t\tout.tabs[type] = [bin.readUint(data, offset), bin.readUint(data, offset+4), data[offset+8]];\n\t\t}\n\t\telse if(type==\"cHRM\") {\n\t\t\tout.tabs[type] = [];\n\t\t\tfor(var i=0; i<8; i++) out.tabs[type].push(bin.readUint(data, offset+i*4));\n\t\t}\n\t\telse if(type==\"tEXt\") {\n\t\t\tif(out.tabs[type]==null) out.tabs[type] = {};\n\t\t\tvar nz = bin.nextZero(data, offset);\n\t\t\tvar keyw = bin.readASCII(data, offset, nz-offset);\n\t\t\tvar text = bin.readASCII(data, nz+1, offset+len-nz-1);\n\t\t\tout.tabs[type][keyw] = text;\n\t\t}\n\t\telse if(type==\"iTXt\") {\n\t\t\tif(out.tabs[type]==null) out.tabs[type] = {};\n\t\t\tvar nz = 0, off = offset;\n\t\t\tnz = bin.nextZero(data, off);\n\t\t\tvar keyw = bin.readASCII(data, off, nz-off);  off = nz + 1;\n\t\t\tvar cflag = data[off], cmeth = data[off+1];  off+=2;\n\t\t\tnz = bin.nextZero(data, off);\n\t\t\tvar ltag = bin.readASCII(data, off, nz-off);  off = nz + 1;\n\t\t\tnz = bin.nextZero(data, off);\n\t\t\tvar tkeyw = bin.readUTF8(data, off, nz-off);  off = nz + 1;\n\t\t\tvar text  = bin.readUTF8(data, off, len-(off-offset));\n\t\t\tout.tabs[type][keyw] = text;\n\t\t}\n\t\telse if(type==\"PLTE\") {\n\t\t\tout.tabs[type] = bin.readBytes(data, offset, len);\n\t\t}\n\t\telse if(type==\"hIST\") {\n\t\t\tvar pl = out.tabs[\"PLTE\"].length/3;\n\t\t\tout.tabs[type] = [];  for(var i=0; i<pl; i++) out.tabs[type].push(rUs(data, offset+i*2));\n\t\t}\n\t\telse if(type==\"tRNS\") {\n\t\t\tif     (out.ctype==3) out.tabs[type] = bin.readBytes(data, offset, len);\n\t\t\telse if(out.ctype==0) out.tabs[type] = rUs(data, offset);\n\t\t\telse if(out.ctype==2) out.tabs[type] = [ rUs(data,offset),rUs(data,offset+2),rUs(data,offset+4) ];\n\t\t\t//else console.log(\"tRNS for unsupported color type\",out.ctype, len);\n\t\t}\n\t\telse if(type==\"gAMA\") out.tabs[type] = bin.readUint(data, offset)/100000;\n\t\telse if(type==\"sRGB\") out.tabs[type] = data[offset];\n\t\telse if(type==\"bKGD\")\n\t\t{\n\t\t\tif     (out.ctype==0 || out.ctype==4) out.tabs[type] = [rUs(data, offset)];\n\t\t\telse if(out.ctype==2 || out.ctype==6) out.tabs[type] = [rUs(data, offset), rUs(data, offset+2), rUs(data, offset+4)];\n\t\t\telse if(out.ctype==3) out.tabs[type] = data[offset];\n\t\t}\n\t\telse if(type==\"IEND\") {\n\t\t\tif(foff!=0) {  var fr = out.frames[out.frames.length-1];\n\t\t\t\tfr.data = UPNG.decode._decompress(out, fd.slice(0,foff), fr.rect.width, fr.rect.height);  foff=0;\n\t\t\t}\t\n\t\t\tout.data = UPNG.decode._decompress(out, dd, out.width, out.height);  break;\n\t\t}\n\t\t//else {  log(\"unknown chunk type\", type, len);  }\n\t\toffset += len;\n\t\tvar crc = bin.readUint(data, offset);  offset += 4;\n\t}\n\tdelete out.compress;  delete out.interlace;  delete out.filter;\n\treturn out;\n}\n\nUPNG.decode._decompress = function(out, dd, w, h) {\n\tif(out.compress ==0) dd = UPNG.decode._inflate(dd);\n\n\tif     (out.interlace==0) dd = UPNG.decode._filterZero(dd, out, 0, w, h);\n\telse if(out.interlace==1) dd = UPNG.decode._readInterlace(dd, out);\n\treturn dd;\n}\n\nUPNG.decode._inflate = function(data) {  return pako[\"inflate\"](data);  }\n\nUPNG.decode._readInterlace = function(data, out)\n{\n\tvar w = out.width, h = out.height;\n\tvar bpp = UPNG.decode._getBPP(out), cbpp = bpp>>3, bpl = Math.ceil(w*bpp/8);\n\tvar img = new Uint8Array( h * bpl );\n\tvar di = 0;\n\n\tvar starting_row  = [ 0, 0, 4, 0, 2, 0, 1 ];\n\tvar starting_col  = [ 0, 4, 0, 2, 0, 1, 0 ];\n\tvar row_increment = [ 8, 8, 8, 4, 4, 2, 2 ];\n\tvar col_increment = [ 8, 8, 4, 4, 2, 2, 1 ];\n\n\tvar pass=0;\n\twhile(pass<7)\n\t{\n\t\tvar ri = row_increment[pass], ci = col_increment[pass];\n\t\tvar sw = 0, sh = 0;\n\t\tvar cr = starting_row[pass];  while(cr<h) {  cr+=ri;  sh++;  }\n\t\tvar cc = starting_col[pass];  while(cc<w) {  cc+=ci;  sw++;  }\n\t\tvar bpll = Math.ceil(sw*bpp/8);\n\t\tUPNG.decode._filterZero(data, out, di, sw, sh);\n\n\t\tvar y=0, row = starting_row[pass];\n\t\twhile(row<h)\n\t\t{\n\t\t\tvar col = starting_col[pass];\n\t\t\tvar cdi = (di+y*bpll)<<3;\n\n\t\t\twhile(col<w)\n\t\t\t{\n\t\t\t\tif(bpp==1) {\n\t\t\t\t\tvar val = data[cdi>>3];  val = (val>>(7-(cdi&7)))&1;\n\t\t\t\t\timg[row*bpl + (col>>3)] |= (val << (7-((col&3)<<0)));\n\t\t\t\t}\n\t\t\t\tif(bpp==2) {\n\t\t\t\t\tvar val = data[cdi>>3];  val = (val>>(6-(cdi&7)))&3;\n\t\t\t\t\timg[row*bpl + (col>>2)] |= (val << (6-((col&3)<<1)));\n\t\t\t\t}\n\t\t\t\tif(bpp==4) {\n\t\t\t\t\tvar val = data[cdi>>3];  val = (val>>(4-(cdi&7)))&15;\n\t\t\t\t\timg[row*bpl + (col>>1)] |= (val << (4-((col&1)<<2)));\n\t\t\t\t}\n\t\t\t\tif(bpp>=8) {\n\t\t\t\t\tvar ii = row*bpl+col*cbpp;\n\t\t\t\t\tfor(var j=0; j<cbpp; j++) img[ii+j] = data[(cdi>>3)+j];\n\t\t\t\t}\n\t\t\t\tcdi+=bpp;  col+=ci;\n\t\t\t}\n\t\t\ty++;  row += ri;\n\t\t}\n\t\tif(sw*sh!=0) di += sh * (1 + bpll);\n\t\tpass = pass + 1;\n\t}\n\treturn img;\n}\n\nUPNG.decode._getBPP = function(out) {\n\tvar noc = [1,null,3,1,2,null,4][out.ctype];\n\treturn noc * out.depth;\n}\n\nUPNG.decode._filterZero = function(data, out, off, w, h)\n{\n\tvar bpp = UPNG.decode._getBPP(out), bpl = Math.ceil(w*bpp/8), paeth = UPNG.decode._paeth;\n\tbpp = Math.ceil(bpp/8);\n\n\tfor(var y=0; y<h; y++)  {\n\t\tvar i = off+y*bpl, di = i+y+1;\n\t\tvar type = data[di-1];\n\n\t\tif     (type==0) for(var x=  0; x<bpl; x++) data[i+x] = data[di+x];\n\t\telse if(type==1) {\n\t\t\tfor(var x=  0; x<bpp; x++) data[i+x] = data[di+x];\n\t\t\tfor(var x=bpp; x<bpl; x++) data[i+x] = (data[di+x] + data[i+x-bpp])&255;\n\t\t}\n\t\telse if(y==0) {\n\t\t\tfor(var x=  0; x<bpp; x++) data[i+x] = data[di+x];\n\t\t\tif(type==2) for(var x=bpp; x<bpl; x++) data[i+x] = (data[di+x])&255;\n\t\t\tif(type==3) for(var x=bpp; x<bpl; x++) data[i+x] = (data[di+x] + (data[i+x-bpp]>>1) )&255;\n\t\t\tif(type==4) for(var x=bpp; x<bpl; x++) data[i+x] = (data[di+x] + paeth(data[i+x-bpp], 0, 0) )&255;\n\t\t}\n\t\telse {\n\t\t\tif(type==2) { for(var x=  0; x<bpl; x++) data[i+x] = (data[di+x] + data[i+x-bpl])&255;  }\n\n\t\t\tif(type==3) { for(var x=  0; x<bpp; x++) data[i+x] = (data[di+x] + (data[i+x-bpl]>>1))&255;\n\t\t\t              for(var x=bpp; x<bpl; x++) data[i+x] = (data[di+x] + ((data[i+x-bpl]+data[i+x-bpp])>>1) )&255;  }\n\n\t\t\tif(type==4) { for(var x=  0; x<bpp; x++) data[i+x] = (data[di+x] + paeth(0, data[i+x-bpl], 0))&255;\n\t\t\t\t\t\t  for(var x=bpp; x<bpl; x++) data[i+x] = (data[di+x] + paeth(data[i+x-bpp], data[i+x-bpl], data[i+x-bpp-bpl]) )&255;  }\n\t\t}\n\t}\n\treturn data;\n}\n\nUPNG.decode._paeth = function(a,b,c)\n{\n\tvar p = a+b-c, pa = Math.abs(p-a), pb = Math.abs(p-b), pc = Math.abs(p-c);\n\tif (pa <= pb && pa <= pc)  return a;\n\telse if (pb <= pc)  return b;\n\treturn c;\n}\n\nUPNG.decode._IHDR = function(data, offset, out)\n{\n\tvar bin = UPNG._bin;\n\tout.width  = bin.readUint(data, offset);  offset += 4;\n\tout.height = bin.readUint(data, offset);  offset += 4;\n\tout.depth     = data[offset];  offset++;\n\tout.ctype     = data[offset];  offset++;\n\tout.compress  = data[offset];  offset++;\n\tout.filter    = data[offset];  offset++;\n\tout.interlace = data[offset];  offset++;\n}\n\nUPNG._bin = {\n\tnextZero   : function(data,p)  {  while(data[p]!=0) p++;  return p;  },\n\treadUshort : function(buff,p)  {  return (buff[p]<< 8) | buff[p+1];  },\n\twriteUshort: function(buff,p,n){  buff[p] = (n>>8)&255;  buff[p+1] = n&255;  },\n\treadUint   : function(buff,p)  {  return (buff[p]*(256*256*256)) + ((buff[p+1]<<16) | (buff[p+2]<< 8) | buff[p+3]);  },\n\twriteUint  : function(buff,p,n){  buff[p]=(n>>24)&255;  buff[p+1]=(n>>16)&255;  buff[p+2]=(n>>8)&255;  buff[p+3]=n&255;  },\n\treadASCII  : function(buff,p,l){  var s = \"\";  for(var i=0; i<l; i++) s += String.fromCharCode(buff[p+i]);  return s;    },\n\twriteASCII : function(data,p,s){  for(var i=0; i<s.length; i++) data[p+i] = s.charCodeAt(i);  },\n\treadBytes  : function(buff,p,l){  var arr = [];   for(var i=0; i<l; i++) arr.push(buff[p+i]);   return arr;  },\n\tpad : function(n) { return n.length < 2 ? \"0\" + n : n; },\n\treadUTF8 : function(buff, p, l) {\n\t\tvar s = \"\", ns;\n\t\tfor(var i=0; i<l; i++) s += \"%\" + UPNG._bin.pad(buff[p+i].toString(16));\n\t\ttry {  ns = decodeURIComponent(s); }\n\t\tcatch(e) {  return UPNG._bin.readASCII(buff, p, l);  }\n\t\treturn  ns;\n\t}\n}\nUPNG._copyTile = function(sb, sw, sh, tb, tw, th, xoff, yoff, mode)\n{\n\tvar w = Math.min(sw,tw), h = Math.min(sh,th);\n\tvar si=0, ti=0;\n\tfor(var y=0; y<h; y++)\n\t\tfor(var x=0; x<w; x++)\n\t\t{\n\t\t\tif(xoff>=0 && yoff>=0) {  si = (y*sw+x)<<2;  ti = (( yoff+y)*tw+xoff+x)<<2;  }\n\t\t\telse                   {  si = ((-yoff+y)*sw-xoff+x)<<2;  ti = (y*tw+x)<<2;  }\n\t\t\t\n\t\t\tif     (mode==0) {  tb[ti] = sb[si];  tb[ti+1] = sb[si+1];  tb[ti+2] = sb[si+2];  tb[ti+3] = sb[si+3];  }\n\t\t\telse if(mode==1) {\n\t\t\t\tvar fa = sb[si+3]*(1/255), fr=sb[si]*fa, fg=sb[si+1]*fa, fb=sb[si+2]*fa; \n\t\t\t\tvar ba = tb[ti+3]*(1/255), br=tb[ti]*ba, bg=tb[ti+1]*ba, bb=tb[ti+2]*ba; \n\t\t\t\t\n\t\t\t\tvar ifa=1-fa, oa = fa+ba*ifa, ioa = (oa==0?0:1/oa);\n\t\t\t\ttb[ti+3] = 255*oa;  \n\t\t\t\ttb[ti+0] = (fr+br*ifa)*ioa;  \n\t\t\t\ttb[ti+1] = (fg+bg*ifa)*ioa;   \n\t\t\t\ttb[ti+2] = (fb+bb*ifa)*ioa;  \n\t\t\t}\n\t\t\telse if(mode==2){\t// copy only differences, otherwise zero\n\t\t\t\tvar fa = sb[si+3], fr=sb[si], fg=sb[si+1], fb=sb[si+2]; \n\t\t\t\tvar ba = tb[ti+3], br=tb[ti], bg=tb[ti+1], bb=tb[ti+2]; \n\t\t\t\tif(fa==ba && fr==br && fg==bg && fb==bb) {  tb[ti]=0;  tb[ti+1]=0;  tb[ti+2]=0;  tb[ti+3]=0;  }\n\t\t\t\telse {  tb[ti]=fr;  tb[ti+1]=fg;  tb[ti+2]=fb;  tb[ti+3]=fa;  }\n\t\t\t}\n\t\t\telse if(mode==3){\t// check if can be blended\n\t\t\t\tvar fa = sb[si+3], fr=sb[si], fg=sb[si+1], fb=sb[si+2]; \n\t\t\t\tvar ba = tb[ti+3], br=tb[ti], bg=tb[ti+1], bb=tb[ti+2]; \n\t\t\t\tif(fa==ba && fr==br && fg==bg && fb==bb) continue;\n\t\t\t\t//if(fa!=255 && ba!=0) return false;\n\t\t\t\tif(fa<220 && ba>20) return false;\n\t\t\t}\n\t\t}\n\treturn true;\n}\n\n\n\nUPNG.encode = function(bufs, w, h, ps, dels, forbidPlte)\n{\n\tif(ps==null) ps=0;\n\tif(forbidPlte==null) forbidPlte = false;\n\tvar data = new Uint8Array(bufs[0].byteLength*bufs.length+100);\n\tvar wr=[0x89, 0x50, 0x4e, 0x47, 0x0d, 0x0a, 0x1a, 0x0a];\n\tfor(var i=0; i<8; i++) data[i]=wr[i];\n\tvar offset = 8,  bin = UPNG._bin, crc = UPNG.crc.crc, wUi = bin.writeUint, wUs = bin.writeUshort, wAs = bin.writeASCII;\n\n\tvar nimg = UPNG.encode.compressPNG(bufs, w, h, ps, forbidPlte);\n\n\twUi(data,offset, 13);     offset+=4;\n\twAs(data,offset,\"IHDR\");  offset+=4;\n\twUi(data,offset,w);  offset+=4;\n\twUi(data,offset,h);  offset+=4;\n\tdata[offset] = nimg.depth;  offset++;  // depth\n\tdata[offset] = nimg.ctype;  offset++;  // ctype\n\tdata[offset] = 0;  offset++;  // compress\n\tdata[offset] = 0;  offset++;  // filter\n\tdata[offset] = 0;  offset++;  // interlace\n\twUi(data,offset,crc(data,offset-17,17));  offset+=4; // crc\n\n\t// 9 bytes to say, that it is sRGB\n\twUi(data,offset, 1);      offset+=4;\n\twAs(data,offset,\"sRGB\");  offset+=4;\n\tdata[offset] = 1;  offset++;\n\twUi(data,offset,crc(data,offset-5,5));  offset+=4; // crc\n\n\tvar anim = bufs.length>1;\n\tif(anim) {\n\t\twUi(data,offset, 8);      offset+=4;\n\t\twAs(data,offset,\"acTL\");  offset+=4;\n\t\twUi(data,offset, bufs.length);      offset+=4;\n\t\twUi(data,offset, 0);      offset+=4;\n\t\twUi(data,offset,crc(data,offset-12,12));  offset+=4; // crc\n\t}\n\n\tif(nimg.ctype==3) {\n\t\tvar dl = nimg.plte.length;\n\t\twUi(data,offset, dl*3);  offset+=4;\n\t\twAs(data,offset,\"PLTE\");  offset+=4;\n\t\tfor(var i=0; i<dl; i++){\n\t\t\tvar ti=i*3, c=nimg.plte[i], r=(c)&255, g=(c>>8)&255, b=(c>>16)&255;\n\t\t\tdata[offset+ti+0]=r;  data[offset+ti+1]=g;  data[offset+ti+2]=b;\n\t\t}\n\t\toffset+=dl*3;\n\t\twUi(data,offset,crc(data,offset-dl*3-4,dl*3+4));  offset+=4; // crc\n\n\t\tif(nimg.gotAlpha) {\n\t\t\twUi(data,offset, dl);  offset+=4;\n\t\t\twAs(data,offset,\"tRNS\");  offset+=4;\n\t\t\tfor(var i=0; i<dl; i++)  data[offset+i]=(nimg.plte[i]>>24)&255;\n\t\t\toffset+=dl;\n\t\t\twUi(data,offset,crc(data,offset-dl-4,dl+4));  offset+=4; // crc\n\t\t}\n\t}\n\t\n\tvar fi = 0;\n\tfor(var j=0; j<nimg.frames.length; j++)\n\t{\n\t\tvar fr = nimg.frames[j];\n\t\tif(anim) {\n\t\t\twUi(data,offset, 26);     offset+=4;\n\t\t\twAs(data,offset,\"fcTL\");  offset+=4;\n\t\t\twUi(data, offset, fi++);   offset+=4;\n\t\t\twUi(data, offset, fr.rect.width );   offset+=4;\n\t\t\twUi(data, offset, fr.rect.height);   offset+=4;\n\t\t\twUi(data, offset, fr.rect.x);   offset+=4;\n\t\t\twUi(data, offset, fr.rect.y);   offset+=4;\n\t\t\twUs(data, offset, dels[j]);   offset+=2;\n\t\t\twUs(data, offset,  1000);   offset+=2;\n\t\t\tdata[offset] = fr.dispose;  offset++;\t// dispose\n\t\t\tdata[offset] = fr.blend  ;  offset++;\t// blend\n\t\t\twUi(data,offset,crc(data,offset-30,30));  offset+=4; // crc\n\t\t}\n\t\t\t\t\n\t\tvar imgd = fr.cimg, dl = imgd.length;\n\t\twUi(data,offset, dl+(j==0?0:4));     offset+=4;\n\t\tvar ioff = offset;\n\t\twAs(data,offset,(j==0)?\"IDAT\":\"fdAT\");  offset+=4;\n\t\tif(j!=0) {  wUi(data, offset, fi++);  offset+=4;  }\n\t\tfor(var i=0; i<dl; i++) data[offset+i] = imgd[i];\n\t\toffset += dl;\n\t\twUi(data,offset,crc(data,ioff,offset-ioff));  offset+=4; // crc\n\t}\n\n\twUi(data,offset, 0);     offset+=4;\n\twAs(data,offset,\"IEND\");  offset+=4;\n\twUi(data,offset,crc(data,offset-4,4));  offset+=4; // crc\n\n\treturn data.buffer.slice(0,offset);\n}\n\nUPNG.encode.compressPNG = function(bufs, w, h, ps, forbidPlte)\n{\n\tvar out = UPNG.encode.compress(bufs, w, h, ps, false, forbidPlte);\n\tfor(var i=0; i<bufs.length; i++) {\n\t\tvar frm = out.frames[i], nw=frm.rect.width, nh=frm.rect.height, bpl=frm.bpl, bpp=frm.bpp;\n\t\tvar fdata = new Uint8Array(nh*bpl+nh);\n\t\tfrm.cimg = UPNG.encode._filterZero(frm.img,nh,bpp,bpl,fdata);\n\t}\t\n\treturn out;\n}\n\nUPNG.encode.compress = function(bufs, w, h, ps, forGIF, forbidPlte)\n{\n\tif(forbidPlte==null) forbidPlte = false;\n\t\n\tvar ctype = 6, depth = 8, bpp = 4, alphaAnd=255\n\t\n\tfor(var j=0; j<bufs.length; j++)  {  // when not quantized, other frames can contain colors, that are not in an initial frame\n\t\tvar img = new Uint8Array(bufs[j]), ilen = img.length;\n\t\tfor(var i=0; i<ilen; i+=4) alphaAnd &= img[i+3];\n\t}\n\tvar gotAlpha = (alphaAnd)!=255;\n\t\n\tvar cmap={}, plte=[];  if(bufs.length!=0) {  cmap[0]=0;  plte.push(0);  if(ps!=0) ps--;  } \n\t\n\t\n\tif(ps!=0) {\n\t\tvar qres = UPNG.quantize(bufs, ps, forGIF);  bufs = qres.bufs;\n\t\tfor(var i=0; i<qres.plte.length; i++) {  var c=qres.plte[i].est.rgba;  if(cmap[c]==null) {  cmap[c]=plte.length;  plte.push(c);  }     }\n\t}\n\telse {\n\t\t// what if ps==0, but there are <=256 colors?  we still need to detect, if the palette could be used\n\t\tfor(var j=0; j<bufs.length; j++)  {  // when not quantized, other frames can contain colors, that are not in an initial frame\n\t\t\tvar img32 = new Uint32Array(bufs[j]), ilen = img32.length;\n\t\t\tfor(var i=0; i<ilen; i++) {\n\t\t\t\tvar c = img32[i];\n\t\t\t\tif((i<w || (c!=img32[i-1] && c!=img32[i-w])) && cmap[c]==null) {  cmap[c]=plte.length;  plte.push(c);  if(plte.length>=300) break;  }\n\t\t\t}\n\t\t}\n\t}\n\t\n\tvar brute = gotAlpha ? forGIF : false;\t\t// brute : frames can only be copied, not \"blended\"\n\tvar cc=plte.length;  //console.log(cc);\n\tif(cc<=256 && forbidPlte==false) {\n\t\tif(cc<= 2) depth=1;  else if(cc<= 4) depth=2;  else if(cc<=16) depth=4;  else depth=8;\n\t\tif(forGIF) depth=8;\n\t\tgotAlpha = true;\n\t}\n\t\n\t\n\tvar frms = [];\n\tfor(var j=0; j<bufs.length; j++)\n\t{\n\t\tvar cimg = new Uint8Array(bufs[j]), cimg32 = new Uint32Array(cimg.buffer);\n\t\t\n\t\tvar nx=0, ny=0, nw=w, nh=h, blend=0;\n\t\tif(j!=0 && !brute) {\n\t\t\tvar tlim = (forGIF || j==1 || frms[frms.length-2].dispose==2)?1:2, tstp = 0, tarea = 1e9;\n\t\t\tfor(var it=0; it<tlim; it++)\n\t\t\t{\n\t\t\t\tvar pimg = new Uint8Array(bufs[j-1-it]), p32 = new Uint32Array(bufs[j-1-it]);\n\t\t\t\tvar mix=w,miy=h,max=-1,may=-1;\n\t\t\t\tfor(var y=0; y<h; y++) for(var x=0; x<w; x++) {\n\t\t\t\t\tvar i = y*w+x;\n\t\t\t\t\tif(cimg32[i]!=p32[i]) {\n\t\t\t\t\t\tif(x<mix) mix=x;  if(x>max) max=x;\n\t\t\t\t\t\tif(y<miy) miy=y;  if(y>may) may=y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvar sarea = (max==-1) ? 1 : (max-mix+1)*(may-miy+1);\n\t\t\t\tif(sarea<tarea) {\n\t\t\t\t\ttarea = sarea;  tstp = it;  \n\t\t\t\t\tif(max==-1) {  nx=ny=0;  nw=nh=1;  }\n\t\t\t\t\telse {  nx = mix; ny = miy; nw = max-mix+1; nh = may-miy+1;  }\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tvar pimg = new Uint8Array(bufs[j-1-tstp]);\n\t\t\tif(tstp==1) frms[frms.length-1].dispose = 2;\n\t\t\t\n\t\t\tvar nimg = new Uint8Array(nw*nh*4), nimg32 = new Uint32Array(nimg.buffer);\n\t\t\tUPNG.   _copyTile(pimg,w,h, nimg,nw,nh, -nx,-ny, 0);\n\t\t\tif(UPNG._copyTile(cimg,w,h, nimg,nw,nh, -nx,-ny, 3)) {\n\t\t\t\tUPNG._copyTile(cimg,w,h, nimg,nw,nh, -nx,-ny, 2);  blend = 1;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tUPNG._copyTile(cimg,w,h, nimg,nw,nh, -nx,-ny, 0);  blend = 0;\n\t\t\t}\n\t\t\tcimg = nimg;  cimg32 = new Uint32Array(cimg.buffer);\n\t\t}\n\t\tvar bpl = 4*nw;\n\t\tif(cc<=256 && forbidPlte==false) {\n\t\t\tbpl = Math.ceil(depth*nw/8);\n\t\t\tvar nimg = new Uint8Array(bpl*nh);\n\t\t\tfor(var y=0; y<nh; y++) {  var i=y*bpl, ii=y*nw;\n\t\t\t\tif     (depth==8) for(var x=0; x<nw; x++) nimg[i+(x)   ]   =  (cmap[cimg32[ii+x]]             );\n\t\t\t\telse if(depth==4) for(var x=0; x<nw; x++) nimg[i+(x>>1)]  |=  (cmap[cimg32[ii+x]]<<(4-(x&1)*4));\n\t\t\t\telse if(depth==2) for(var x=0; x<nw; x++) nimg[i+(x>>2)]  |=  (cmap[cimg32[ii+x]]<<(6-(x&3)*2));\n\t\t\t\telse if(depth==1) for(var x=0; x<nw; x++) nimg[i+(x>>3)]  |=  (cmap[cimg32[ii+x]]<<(7-(x&7)*1));\n\t\t\t}\n\t\t\tcimg=nimg;  ctype=3;  bpp=1;\n\t\t}\n\t\telse if(gotAlpha==false && bufs.length==1) {\t// some next \"reduced\" frames may contain alpha for blending\n\t\t\tvar nimg = new Uint8Array(nw*nh*3), area=nw*nh;\n\t\t\tfor(var i=0; i<area; i++) { var ti=i*3, qi=i*4;  nimg[ti]=cimg[qi];  nimg[ti+1]=cimg[qi+1];  nimg[ti+2]=cimg[qi+2];  }\n\t\t\tcimg=nimg;  ctype=2;  bpp=3;  bpl=3*nw;\n\t\t}\n\t\tfrms.push({rect:{x:nx,y:ny,width:nw,height:nh}, img:cimg, bpl:bpl, bpp:bpp, blend:blend, dispose:brute?1:0});\n\t}\n\treturn {ctype:ctype, depth:depth, plte:plte, gotAlpha:gotAlpha, frames:frms  };\n}\n\nUPNG.encode._filterZero = function(img,h,bpp,bpl,data)\n{\n\tvar fls = [];\n\tfor(var t=0; t<5; t++) {  if(h*bpl>500000 && (t==2 || t==3 || t==4)) continue;\n\t\tfor(var y=0; y<h; y++) UPNG.encode._filterLine(data, img, y, bpl, bpp, t);\n\t\tfls.push(pako[\"deflate\"](data));  if(bpp==1) break;\n\t}\n\tvar ti, tsize=1e9;\n\tfor(var i=0; i<fls.length; i++) if(fls[i].length<tsize) {  ti=i;  tsize=fls[i].length;  }\n\treturn fls[ti];\n}\nUPNG.encode._filterLine = function(data, img, y, bpl, bpp, type)\n{\n\tvar i = y*bpl, di = i+y, paeth = UPNG.decode._paeth\n\tdata[di]=type;  di++;\n\n\tif(type==0) for(var x=0; x<bpl; x++) data[di+x] = img[i+x];\n\telse if(type==1) {\n\t\tfor(var x=  0; x<bpp; x++) data[di+x] =  img[i+x];\n\t\tfor(var x=bpp; x<bpl; x++) data[di+x] = (img[i+x]-img[i+x-bpp]+256)&255;\n\t}\n\telse if(y==0) {\n\t\tfor(var x=  0; x<bpp; x++) data[di+x] = img[i+x];\n\n\t\tif(type==2) for(var x=bpp; x<bpl; x++) data[di+x] = img[i+x];\n\t\tif(type==3) for(var x=bpp; x<bpl; x++) data[di+x] = (img[i+x] - (img[i+x-bpp]>>1) +256)&255;\n\t\tif(type==4) for(var x=bpp; x<bpl; x++) data[di+x] = (img[i+x] - paeth(img[i+x-bpp], 0, 0) +256)&255;\n\t}\n\telse {\n\t\tif(type==2) { for(var x=  0; x<bpl; x++) data[di+x] = (img[i+x]+256 - img[i+x-bpl])&255;  }\n\t\tif(type==3) { for(var x=  0; x<bpp; x++) data[di+x] = (img[i+x]+256 - (img[i+x-bpl]>>1))&255;\n\t\t\t\t\t  for(var x=bpp; x<bpl; x++) data[di+x] = (img[i+x]+256 - ((img[i+x-bpl]+img[i+x-bpp])>>1))&255;  }\n\t\tif(type==4) { for(var x=  0; x<bpp; x++) data[di+x] = (img[i+x]+256 - paeth(0, img[i+x-bpl], 0))&255;\n\t\t\t\t\t  for(var x=bpp; x<bpl; x++) data[di+x] = (img[i+x]+256 - paeth(img[i+x-bpp], img[i+x-bpl], img[i+x-bpp-bpl]))&255;  }\n\t}\n}\n\nUPNG.crc = {\n\ttable : ( function() {\n\t   var tab = new Uint32Array(256);\n\t   for (var n=0; n<256; n++) {\n\t\t\tvar c = n;\n\t\t\tfor (var k=0; k<8; k++) {\n\t\t\t\tif (c & 1)  c = 0xedb88320 ^ (c >>> 1);\n\t\t\t\telse        c = c >>> 1;\n\t\t\t}\n\t\t\ttab[n] = c;  }\n\t\treturn tab;  })(),\n\tupdate : function(c, buf, off, len) {\n\t\tfor (var i=0; i<len; i++)  c = UPNG.crc.table[(c ^ buf[off+i]) & 0xff] ^ (c >>> 8);\n\t\treturn c;\n\t},\n\tcrc : function(b,o,l)  {  return UPNG.crc.update(0xffffffff,b,o,l) ^ 0xffffffff;  }\n}\n\n\nUPNG.quantize = function(bufs, ps, roundAlpha)\n{\t\n\tvar imgs = [], totl = 0;\n\tfor(var i=0; i<bufs.length; i++) {  imgs.push(UPNG.encode.alphaMul(new Uint8Array(bufs[i]), roundAlpha));  totl+=bufs[i].byteLength;  }\n\t\n\tvar nimg = new Uint8Array(totl), nimg32 = new Uint32Array(nimg.buffer), noff=0;\n\tfor(var i=0; i<imgs.length; i++) {\n\t\tvar img = imgs[i], il = img.length;\n\t\tfor(var j=0; j<il; j++) nimg[noff+j] = img[j];\n\t\tnoff += il;\n\t}\n\t\n\tvar root = {i0:0, i1:nimg.length, bst:null, est:null, tdst:0, left:null, right:null };  // basic statistic, extra statistic\n\troot.bst = UPNG.quantize.stats(  nimg,root.i0, root.i1  );  root.est = UPNG.quantize.estats( root.bst );\n\tvar leafs = [root];\n\t\n\twhile(leafs.length<ps)\n\t{\n\t\tvar maxL = 0, mi=0;\n\t\tfor(var i=0; i<leafs.length; i++) if(leafs[i].est.L > maxL) {  maxL=leafs[i].est.L;  mi=i;  }\n\t\tif(maxL<1e-3) break;\n\t\tvar node = leafs[mi];\n\t\t\n\t\tvar s0 = UPNG.quantize.splitPixels(nimg,nimg32, node.i0, node.i1, node.est.e, node.est.eMq255);\n\t\t\n\t\tvar ln = {i0:node.i0, i1:s0, bst:null, est:null, tdst:0, left:null, right:null };  ln.bst = UPNG.quantize.stats( nimg, ln.i0, ln.i1 );  \n\t\tln.est = UPNG.quantize.estats( ln.bst );\n\t\tvar rn = {i0:s0, i1:node.i1, bst:null, est:null, tdst:0, left:null, right:null };  rn.bst = {R:[], m:[], N:node.bst.N-ln.bst.N};\n\t\tfor(var i=0; i<16; i++) rn.bst.R[i] = node.bst.R[i]-ln.bst.R[i];\n\t\tfor(var i=0; i< 4; i++) rn.bst.m[i] = node.bst.m[i]-ln.bst.m[i];\n\t\trn.est = UPNG.quantize.estats( rn.bst );\n\t\t\n\t\tnode.left = ln;  node.right = rn;\n\t\tleafs[mi]=ln;  leafs.push(rn);\n\t}\n\tleafs.sort(function(a,b) {  return b.bst.N-a.bst.N;  });\n\t\n\tfor(var ii=0; ii<imgs.length; ii++) {\n\t\tvar planeDst = UPNG.quantize.planeDst;\n\t\tvar sb = new Uint8Array(imgs[ii].buffer), tb = new Uint32Array(imgs[ii].buffer), len = sb.length;\n\t\t\n\t\tvar stack = [], si=0;\n\t\tfor(var i=0; i<len; i+=4) {\n\t\t\tvar r=sb[i]*(1/255), g=sb[i+1]*(1/255), b=sb[i+2]*(1/255), a=sb[i+3]*(1/255);\n\t\t\t\n\t\t\t//  exact, but too slow :(\n\t\t\t//var nd = UPNG.quantize.getNearest(root, r, g, b, a);\n\t\t\tvar nd = root;\n\t\t\twhile(nd.left) nd = (planeDst(nd.est,r,g,b,a)<=0) ? nd.left : nd.right;\n\t\t\t\n\t\t\ttb[i>>2] = nd.est.rgba;\n\t\t}\n\t\timgs[ii]=tb.buffer;\n\t}\n\treturn {  bufs:imgs, plte:leafs  };\n}\nUPNG.quantize.getNearest = function(nd, r,g,b,a)\n{\n\tif(nd.left==null) {  nd.tdst = UPNG.quantize.dist(nd.est.q,r,g,b,a);  return nd;  }\n\tvar planeDst = UPNG.quantize.planeDst(nd.est,r,g,b,a);\n\t\n\tvar node0 = nd.left, node1 = nd.right;\n\tif(planeDst>0) {  node0=nd.right;  node1=nd.left;  }\n\t\n\tvar ln = UPNG.quantize.getNearest(node0, r,g,b,a);\n\tif(ln.tdst<=planeDst*planeDst) return ln;\n\tvar rn = UPNG.quantize.getNearest(node1, r,g,b,a);\n\treturn rn.tdst<ln.tdst ? rn : ln;\n}\nUPNG.quantize.planeDst = function(est, r,g,b,a) {  var e = est.e;  return e[0]*r + e[1]*g + e[2]*b + e[3]*a - est.eMq;  }\nUPNG.quantize.dist     = function(q,   r,g,b,a) {  var d0=r-q[0], d1=g-q[1], d2=b-q[2], d3=a-q[3];  return d0*d0+d1*d1+d2*d2+d3*d3;  }\n\nUPNG.quantize.splitPixels = function(nimg, nimg32, i0, i1, e, eMq)\n{\n\tvar vecDot = UPNG.quantize.vecDot;\n\ti1-=4;\n\tvar shfs = 0;\n\twhile(i0<i1)\n\t{\n\t\twhile(vecDot(nimg, i0, e)<=eMq) i0+=4;\n\t\twhile(vecDot(nimg, i1, e)> eMq) i1-=4;\n\t\tif(i0>=i1) break;\n\t\t\n\t\tvar t = nimg32[i0>>2];  nimg32[i0>>2] = nimg32[i1>>2];  nimg32[i1>>2]=t;\n\t\t\n\t\ti0+=4;  i1-=4;\n\t}\n\twhile(vecDot(nimg, i0, e)>eMq) i0-=4;\n\treturn i0+4;\n}\nUPNG.quantize.vecDot = function(nimg, i, e)\n{\n\treturn nimg[i]*e[0] + nimg[i+1]*e[1] + nimg[i+2]*e[2] + nimg[i+3]*e[3];\n}\nUPNG.quantize.stats = function(nimg, i0, i1){\n\tvar R = [0,0,0,0,  0,0,0,0,  0,0,0,0,  0,0,0,0];\n\tvar m = [0,0,0,0];\n\tvar N = (i1-i0)>>2;\n\tfor(var i=i0; i<i1; i+=4)\n\t{\n\t\tvar r = nimg[i]*(1/255), g = nimg[i+1]*(1/255), b = nimg[i+2]*(1/255), a = nimg[i+3]*(1/255);\n\t\t//var r = nimg[i], g = nimg[i+1], b = nimg[i+2], a = nimg[i+3];\n\t\tm[0]+=r;  m[1]+=g;  m[2]+=b;  m[3]+=a;\n\t\t\n\t\tR[ 0] += r*r;  R[ 1] += r*g;  R[ 2] += r*b;  R[ 3] += r*a;  \n\t\t               R[ 5] += g*g;  R[ 6] += g*b;  R[ 7] += g*a; \n\t\t                              R[10] += b*b;  R[11] += b*a;  \n\t\t                                             R[15] += a*a;  \n\t}\n\tR[4]=R[1];  R[8]=R[2];  R[12]=R[3];  R[9]=R[6];  R[13]=R[7];  R[14]=R[11];\n\t\n\treturn {R:R, m:m, N:N};\n}\nUPNG.quantize.estats = function(stats){\n\tvar R = stats.R, m = stats.m, N = stats.N;\n\t\n\tvar m0 = m[0], m1 = m[1], m2 = m[2], m3 = m[3], iN = (N==0 ? 0 : 1/N);\n\tvar Rj = [\n\t\tR[ 0] - m0*m0*iN,  R[ 1] - m0*m1*iN,  R[ 2] - m0*m2*iN,  R[ 3] - m0*m3*iN,  \n\t\tR[ 4] - m1*m0*iN,  R[ 5] - m1*m1*iN,  R[ 6] - m1*m2*iN,  R[ 7] - m1*m3*iN,\n\t\tR[ 8] - m2*m0*iN,  R[ 9] - m2*m1*iN,  R[10] - m2*m2*iN,  R[11] - m2*m3*iN,  \n\t\tR[12] - m3*m0*iN,  R[13] - m3*m1*iN,  R[14] - m3*m2*iN,  R[15] - m3*m3*iN \n\t];\n\t\n\tvar A = Rj, M = UPNG.M4;\n\tvar b = [0.5,0.5,0.5,0.5], mi = 0, tmi = 0;\n\t\n\tif(N!=0)\n\tfor(var i=0; i<10; i++) {\n\t\tb = M.multVec(A, b);  tmi = Math.sqrt(M.dot(b,b));  b = M.sml(1/tmi,  b);\n\t\tif(Math.abs(tmi-mi)<1e-9) break;  mi = tmi;\n\t}\t\n\t//b = [0,0,1,0];  mi=N;\n\tvar q = [m0*iN, m1*iN, m2*iN, m3*iN];\n\tvar eMq255 = M.dot(M.sml(255,q),b);\n\t\n\tvar ia = (q[3]<0.001) ? 0 : 1/q[3];\n\t\n\treturn {  Cov:Rj, q:q, e:b, L:mi,  eMq255:eMq255, eMq : M.dot(b,q),\n\t\t\t\trgba: (((Math.round(255*q[3])<<24) | (Math.round(255*q[2]*ia)<<16) |  (Math.round(255*q[1]*ia)<<8) | (Math.round(255*q[0]*ia)<<0))>>>0)  };\n}\nUPNG.M4 = {\n\tmultVec : function(m,v) {\n\t\t\treturn [\n\t\t\t\tm[ 0]*v[0] + m[ 1]*v[1] + m[ 2]*v[2] + m[ 3]*v[3],\n\t\t\t\tm[ 4]*v[0] + m[ 5]*v[1] + m[ 6]*v[2] + m[ 7]*v[3],\n\t\t\t\tm[ 8]*v[0] + m[ 9]*v[1] + m[10]*v[2] + m[11]*v[3],\n\t\t\t\tm[12]*v[0] + m[13]*v[1] + m[14]*v[2] + m[15]*v[3]\n\t\t\t];\n\t},\n\tdot : function(x,y) {  return  x[0]*y[0]+x[1]*y[1]+x[2]*y[2]+x[3]*y[3];  },\n\tsml : function(a,y) {  return [a*y[0],a*y[1],a*y[2],a*y[3]];  }\n}\n\nUPNG.encode.alphaMul = function(img, roundA) {\n\tvar nimg = new Uint8Array(img.length), area = img.length>>2; \n\tfor(var i=0; i<area; i++) {\n\t\tvar qi=i<<2, ia=img[qi+3];   \n\t\tif(roundA) ia = ((ia<128))?0:255;\n\t\tvar a = ia*(1/255);\n\t\tnimg[qi+0] = img[qi+0]*a;  nimg[qi+1] = img[qi+1]*a;  nimg[qi+2] = img[qi+2]*a;  nimg[qi+3] = ia;\n\t}\n\treturn nimg;\n}\n\n\t\n\t\n\t\n\t\n\t\n\n\n})(UPNG, pako);\n})();\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}